/**
 * @license
 * Copyright 2011 Dan Vanderkam (danvdk@gmail.com)
 * MIT-licensed (http://opensource.org/licenses/MIT)
 *//**
 * @fileoverview Based on PlotKitLayout, but modified to meet the needs of
 * dygraphs.
 *//*jshint globalstrict: true *//*global Dygraph:false */function RGBColor(a){this.ok=!1,a.charAt(0)=="#"&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var b={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var c in b)a==c&&(a=b[c]);var d=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}];for(var e=0;e<d.length;e++){var f=d[e].re,g=d[e].process,h=f.exec(a);if(h){var i=g(h);this.r=i[0],this.g=i[1],this.b=i[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),b.length==1&&(b="0"+b),c.length==1&&(c="0"+c),"#"+a+b+c}}"use strict";var DygraphLayout=function(a){this.dygraph_=a,this.datasets=[],this.setNames=[],this.annotations=[],this.yAxes_=null,this.xTicks_=null,this.yTicks_=null};DygraphLayout.prototype.attr_=function(a){return this.dygraph_.attr_(a)},DygraphLayout.prototype.addDataset=function(a,b){this.datasets.push(b),this.setNames.push(a)},DygraphLayout.prototype.getPlotArea=function(){return this.computePlotArea_()},DygraphLayout.prototype.computePlotArea_=function(){var a={x:0,y:0};return this.attr_("drawYAxis")&&(a.x=this.attr_("yAxisLabelWidth")+2*this.attr_("axisTickSize")),a.w=this.dygraph_.width_-a.x-this.attr_("rightGap"),a.h=this.dygraph_.height_,this.attr_("drawXAxis")&&(this.attr_("xAxisHeight")?a.h-=this.attr_("xAxisHeight"):a.h-=this.attr_("axisLabelFontSize")+2*this.attr_("axisTickSize")),this.dygraph_.numAxes()==2?a.w-=this.attr_("yAxisLabelWidth")+2*this.attr_("axisTickSize"):this.dygraph_.numAxes()>2&&this.dygraph_.error("Only two y-axes are supported at this time. (Trying to use "+this.dygraph_.numAxes()+")"),this.attr_("title")&&(a.h-=this.attr_("titleHeight"),a.y+=this.attr_("titleHeight")),this.attr_("xlabel")&&(a.h-=this.attr_("xLabelHeight")),!this.attr_("ylabel"),!this.attr_("y2label"),this.attr_("showRangeSelector")&&(a.h-=this.attr_("rangeSelectorHeight")+4),a},DygraphLayout.prototype.setAnnotations=function(a){this.annotations=[];var b=this.attr_("xValueParser")||function(a){return a};for(var c=0;c<a.length;c++){var d={};if(!a[c].xval&&!a[c].x){this.dygraph_.error("Annotations must have an 'x' property");return}if(a[c].icon&&(!a[c].hasOwnProperty("width")||!a[c].hasOwnProperty("height"))){this.dygraph_.error("Must set width and height when setting annotation.icon property");return}Dygraph.update(d,a[c]),d.xval||(d.xval=b(d.x)),this.annotations.push(d)}},DygraphLayout.prototype.setXTicks=function(a){this.xTicks_=a},DygraphLayout.prototype.setYAxes=function(a){this.yAxes_=a},DygraphLayout.prototype.setDateWindow=function(a){this.dateWindow_=a},DygraphLayout.prototype.evaluate=function(){this._evaluateLimits(),this._evaluateLineCharts(),this._evaluateLineTicks(),this._evaluateAnnotations()},DygraphLayout.prototype._evaluateLimits=function(){this.minxval=this.maxxval=null;if(this.dateWindow_)this.minxval=this.dateWindow_[0],this.maxxval=this.dateWindow_[1];else for(var a=0;a<this.datasets.length;++a){var b=this.datasets[a];if(b.length>1){var c=b[0][0];if(!this.minxval||c<this.minxval)this.minxval=c;var d=b[b.length-1][0];if(!this.maxxval||d>this.maxxval)this.maxxval=d}}this.xrange=this.maxxval-this.minxval,this.xscale=this.xrange!==0?1/this.xrange:1;for(var e=0;e<this.yAxes_.length;e++){var f=this.yAxes_[e];f.minyval=f.computedValueRange[0],f.maxyval=f.computedValueRange[1],f.yrange=f.maxyval-f.minyval,f.yscale=f.yrange!==0?1/f.yrange:1,f.g.attr_("logscale")&&(f.ylogrange=Dygraph.log10(f.maxyval)-Dygraph.log10(f.minyval),f.ylogscale=f.ylogrange!==0?1/f.ylogrange:1,(!isFinite(f.ylogrange)||isNaN(f.ylogrange))&&f.g.error("axis "+e+" of graph at "+f.g+" can't be displayed in log scale for range ["+f.minyval+" - "+f.maxyval+"]"))}},DygraphLayout._calcYNormal=function(a,b){return a.logscale?1-(Dygraph.log10(b)-Dygraph.log10(a.minyval))*a.ylogscale:1-(b-a.minyval)*a.yscale},DygraphLayout.prototype._evaluateLineCharts=function(){this.points=[],this.setPointsLengths=[],this.setPointsOffsets=[];var a=this.attr_("connectSeparatedPoints");for(var b=0;b<this.datasets.length;++b){var c=this.datasets[b],d=this.setNames[b],e=this.dygraph_.axisPropertiesForSeries(d);this.setPointsOffsets.push(this.points.length);var f=0;for(var g=0;g<c.length;g++){var h=c[g],i=parseFloat(h[0]),j=parseFloat(h[1]),k=(i-this.minxval)*this.xscale,l=DygraphLayout._calcYNormal(e,j),m={x:k,y:l,xval:i,yval:j,name:d};a&&h[1]===null&&(m.yval=null),this.points.push(m),f+=1}this.setPointsLengths.push(f)}},DygraphLayout.prototype._evaluateLineTicks=function(){var a,b,c,d;this.xticks=[];for(a=0;a<this.xTicks_.length;a++)b=this.xTicks_[a],c=b.label,d=this.xscale*(b.v-this.minxval),d>=0&&d<=1&&this.xticks.push([d,c]);this.yticks=[];for(a=0;a<this.yAxes_.length;a++){var e=this.yAxes_[a];for(var f=0;f<e.ticks.length;f++)b=e.ticks[f],c=b.label,d=this.dygraph_.toPercentYCoord(b.v,a),d>=0&&d<=1&&this.yticks.push([a,d,c])}},DygraphLayout.prototype.evaluateWithError=function(){this.evaluate();if(!this.attr_("errorBars")&&!this.attr_("customBars"))return;var a=0;for(var b=0;b<this.datasets.length;++b){var c=0,d=this.datasets[b],e=this.setNames[b],f=this.dygraph_.axisPropertiesForSeries(e);for(c=0;c<d.length;c++,a++){var g=d[c],h=parseFloat(g[0]),i=parseFloat(g[1]);if(h==this.points[a].xval&&i==this.points[a].yval){var j=parseFloat(g[2]),k=parseFloat(g[3]),l=i-j,m=i+k;this.points[a].y_top=DygraphLayout._calcYNormal(f,l),this.points[a].y_bottom=DygraphLayout._calcYNormal(f,m)}}}},DygraphLayout.prototype._evaluateAnnotations=function(){var a,b={};for(a=0;a<this.annotations.length;a++){var c=this.annotations[a];b[c.xval+","+c.series]=c}this.annotated_points=[];if(!this.annotations||!this.annotations.length)return;for(a=0;a<this.points.length;a++){var d=this.points[a],e=d.xval+","+d.name;e in b&&(d.annotation=b[e],this.annotated_points.push(d))}},DygraphLayout.prototype.removeAllDatasets=function(){delete this.datasets,delete this.setNames,delete this.setPointsLengths,delete this.setPointsOffsets,this.datasets=[],this.setNames=[],this.setPointsLengths=[],this.setPointsOffsets=[]},DygraphLayout.prototype.unstackPointAtIndex=function(a){var b=this.points[a],c={};for(var d in b)c[d]=b[d];if(!this.attr_("stackedGraph"))return c;for(var e=a+1;e<this.points.length;e++)if(this.points[e].xval==b.xval){c.yval-=this.points[e].yval;break}return c},"use strict";var DygraphCanvasRenderer=function(a,b,c,d){this.dygraph_=a,this.layout=d,this.element=b,this.elementContext=c,this.container=this.element.parentNode,this.height=this.element.height,this.width=this.element.width;if(!this.isIE&&!DygraphCanvasRenderer.isSupported(this.element))throw"Canvas is not supported.";this.xlabels=[],this.ylabels=[],this.annotations=[],this.chartLabels={},this.area=d.getPlotArea(),this.container.style.position="relative",this.container.style.width=this.width+"px";if(this.dygraph_.isUsingExcanvas_)this._createIEClipArea();else if(!Dygraph.isAndroid()){var e=this.dygraph_.canvas_ctx_;e.beginPath(),e.rect(this.area.x,this.area.y,this.area.w,this.area.h),e.clip(),e=this.dygraph_.hidden_ctx_,e.beginPath(),e.rect(this.area.x,this.area.y,this.area.w,this.area.h),e.clip()}};DygraphCanvasRenderer.prototype.attr_=function(a){return this.dygraph_.attr_(a)},DygraphCanvasRenderer.prototype.clear=function(){function c(a){for(var b=0;b<a.length;b++){var c=a[b];c.parentNode&&c.parentNode.removeChild(c)}}var a;if(this.isIE)try{this.clearDelay&&(this.clearDelay.cancel(),this.clearDelay=null),a=this.elementContext}catch(b){return}a=this.elementContext,a.clearRect(0,0,this.width,this.height),c(this.xlabels),c(this.ylabels),c(this.annotations);for(var d in this.chartLabels){if(!this.chartLabels.hasOwnProperty(d))continue;var e=this.chartLabels[d];e.parentNode&&e.parentNode.removeChild(e)}this.xlabels=[],this.ylabels=[],this.annotations=[],this.chartLabels={}},DygraphCanvasRenderer.isSupported=function(a){var b=null;try{typeof a=="undefined"||a===null?b=document.createElement("canvas"):b=a,b.getContext("2d")}catch(c){var d=navigator.appVersion.match(/MSIE (\d\.\d)/),e=navigator.userAgent.toLowerCase().indexOf("opera")!=-1;return!d||d[1]<6||e?!1:!0}return!0},DygraphCanvasRenderer.prototype.setColors=function(a){this.colorScheme_=a},DygraphCanvasRenderer.prototype.render=function(){function b(a){return Math.round(a)+.5}function c(a){return Math.round(a)-.5}var a=this.elementContext;this.attr_("underlayCallback")&&this.attr_("underlayCallback")(a,this.area,this.dygraph_,this.dygraph_);var d,e,f,g;if(this.attr_("drawYGrid")){g=this.layout.yticks,a.save(),a.strokeStyle=this.attr_("gridLineColor"),a.lineWidth=this.attr_("gridLineWidth");for(f=0;f<g.length;f++){if(g[f][0]!==0)continue;d=b(this.area.x),e=c(this.area.y+g[f][1]*this.area.h),a.beginPath(),a.moveTo(d,e),a.lineTo(d+this.area.w,e),a.closePath(),a.stroke()}a.restore()}if(this.attr_("drawXGrid")){g=this.layout.xticks,a.save(),a.strokeStyle=this.attr_("gridLineColor"),a.lineWidth=this.attr_("gridLineWidth");for(f=0;f<g.length;f++)d=b(this.area.x+g[f][0]*this.area.w),e=c(this.area.y+this.area.h),a.beginPath(),a.moveTo(d,e),a.lineTo(d,this.area.y),a.closePath(),a.stroke();a.restore()}this._renderLineChart(),this._renderAxis(),this._renderChartLabels(),this._renderAnnotations()},DygraphCanvasRenderer.prototype._createIEClipArea=function(){function g(c){if(c.w===0||c.h===0)return;var e=document.createElement("div");e.className=a,e.style.backgroundColor=d,e.style.position="absolute",e.style.left=c.x+"px",e.style.top=c.y+"px",e.style.width=c.w+"px",e.style.height=c.h+"px",b.appendChild(e)}var a="dygraph-clip-div",b=this.dygraph_.graphDiv;for(var c=b.childNodes.length-1;c>=0;c--)b.childNodes[c].className==a&&b.removeChild(b.childNodes[c]);var d=document.bgColor,e=this.dygraph_.graphDiv;while(e!=document){var f=e.currentStyle.backgroundColor;if(f&&f!="transparent"){d=f;break}e=e.parentNode}var h=this.area;g({x:0,y:0,w:h.x,h:this.height}),g({x:h.x,y:0,w:this.width-h.x,h:h.y}),g({x:h.x+h.w,y:0,w:this.width-h.x-h.w,h:this.height}),g({x:h.x,y:h.y+h.h,w:this.width-h.x,h:this.height-h.h-h.y})},DygraphCanvasRenderer.prototype._renderAxis=function(){function a(a){return Math.round(a)+.5}function b(a){return Math.round(a)-.5}if(!this.attr_("drawXAxis")&&!this.attr_("drawYAxis"))return;var c=this.elementContext,d,e,f,g,h,i={position:"absolute",fontSize:this.attr_("axisLabelFontSize")+"px",zIndex:10,color:this.attr_("axisLabelColor"),width:this.attr_("axisLabelWidth")+"px",lineHeight:"normal",overflow:"hidden"},j=function(a,b,c){var d=document.createElement("div");for(var e in i)i.hasOwnProperty(e)&&(d.style[e]=i[e]);var f=document.createElement("div");return f.className="dygraph-axis-label dygraph-axis-label-"+b+(c?" dygraph-axis-label-"+c:""),f.innerHTML=a,d.appendChild(f),d};c.save(),c.strokeStyle=this.attr_("axisLineColor"),c.lineWidth=this.attr_("axisLineWidth");if(this.attr_("drawYAxis")){if(this.layout.yticks&&this.layout.yticks.length>0){var k=this.dygraph_.numAxes();for(h=0;h<this.layout.yticks.length;h++){g=this.layout.yticks[h];if(typeof g=="function")return;e=this.area.x;var l=1,m="y1";g[0]==1&&(e=this.area.x+this.area.w,l=-1,m="y2"),f=this.area.y+g[1]*this.area.h,d=j(g[2],"y",k==2?m:null);var n=f-this.attr_("axisLabelFontSize")/2;n<0&&(n=0),n+this.attr_("axisLabelFontSize")+3>this.height?d.style.bottom="0px":d.style.top=n+"px",g[0]===0?(d.style.left=this.area.x-this.attr_("yAxisLabelWidth")-this.attr_("axisTickSize")+"px",d.style.textAlign="right"):g[0]==1&&(d.style.left=this.area.x+this.area.w+this.attr_("axisTickSize")+"px",d.style.textAlign="left"),d.style.width=this.attr_("yAxisLabelWidth")+"px",this.container.appendChild(d),this.ylabels.push(d)}var o=this.ylabels[0],p=this.attr_("axisLabelFontSize"),q=parseInt(o.style.top,10)+p;q>this.height-p&&(o.style.top=parseInt(o.style.top,10)-p/2+"px")}c.beginPath(),c.moveTo(a(this.area.x),b(this.area.y)),c.lineTo(a(this.area.x),b(this.area.y+this.area.h)),c.closePath(),c.stroke(),this.dygraph_.numAxes()==2&&(c.beginPath(),c.moveTo(b(this.area.x+this.area.w),b(this.area.y)),c.lineTo(b(this.area.x+this.area.w),b(this.area.y+this.area.h)),c.closePath(),c.stroke())}if(this.attr_("drawXAxis")){if(this.layout.xticks)for(h=0;h<this.layout.xticks.length;h++){g=this.layout.xticks[h],e=this.area.x+g[0]*this.area.w,f=this.area.y+this.area.h,d=j(g[1],"x"),d.style.textAlign="center",d.style.top=f+this.attr_("axisTickSize")+"px";var r=e-this.attr_("axisLabelWidth")/2;r+this.attr_("axisLabelWidth")>this.width&&(r=this.width-this.attr_("xAxisLabelWidth"),d.style.textAlign="right"),r<0&&(r=0,d.style.textAlign="left"),d.style.left=r+"px",d.style.width=this.attr_("xAxisLabelWidth")+"px",this.container.appendChild(d),this.xlabels.push(d)}c.beginPath(),c.moveTo(a(this.area.x),b(this.area.y+this.area.h)),c.lineTo(a(this.area.x+this.area.w),b(this.area.y+this.area.h)),c.closePath(),c.stroke()}c.restore()},DygraphCanvasRenderer.prototype._renderChartLabels=function(){function d(d,e,f){var g={left:0,top:c.area.y,width:c.attr_("yLabelWidth"),height:c.area.h};a=document.createElement("div"),a.style.position="absolute",d==1?a.style.left=g.left:a.style.right=g.left,a.style.top=g.top+"px",a.style.width=g.width+"px",a.style.height=g.height+"px",a.style.fontSize=c.attr_("yLabelWidth")-2+"px";var h=document.createElement("div");h.style.position="absolute",h.style.width=g.height+"px",h.style.height=g.width+"px",h.style.top=g.height/2-g.width/2+"px",h.style.left=g.width/2-g.height/2+"px",h.style.textAlign="center";var i="rotate("+(d==1?"-":"")+"90deg)";return h.style.transform=i,h.style.WebkitTransform=i,h.style.MozTransform=i,h.style.OTransform=i,h.style.msTransform=i,typeof document.documentMode!="undefined"&&document.documentMode<9&&(h.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+(d==1?"3":"1")+")",h.style.left="0px",h.style.top="0px"),b=document.createElement("div"),b.className=e,b.innerHTML=f,h.appendChild(b),a.appendChild(h),a}var a,b;this.attr_("title")&&(a=document.createElement("div"),a.style.position="absolute",a.style.top="0px",a.style.left=this.area.x+"px",a.style.width=this.area.w+"px",a.style.height=this.attr_("titleHeight")+"px",a.style.textAlign="center",a.style.fontSize=this.attr_("titleHeight")-8+"px",a.style.fontWeight="bold",b=document.createElement("div"),b.className="dygraph-label dygraph-title",b.innerHTML=this.attr_("title"),a.appendChild(b),this.container.appendChild(a),this.chartLabels.title=a),this.attr_("xlabel")&&(a=document.createElement("div"),a.style.position="absolute",a.style.bottom=0,a.style.left=this.area.x+"px",a.style.width=this.area.w+"px",a.style.height=this.attr_("xLabelHeight")+"px",a.style.textAlign="center",a.style.fontSize=this.attr_("xLabelHeight")-2+"px",b=document.createElement("div"),b.className="dygraph-label dygraph-xlabel",b.innerHTML=this.attr_("xlabel"),a.appendChild(b),this.container.appendChild(a),this.chartLabels.xlabel=a);var c=this,a;this.attr_("ylabel")&&(a=d(1,"dygraph-label dygraph-ylabel",this.attr_("ylabel")),this.container.appendChild(a),this.chartLabels.ylabel=a),this.attr_("y2label")&&this.dygraph_.numAxes()==2&&(a=d(2,"dygraph-label dygraph-y2label",this.attr_("y2label")),this.container.appendChild(a),this.chartLabels.y2label=a)},DygraphCanvasRenderer.prototype._renderAnnotations=function(){var a={position:"absolute",fontSize:this.attr_("axisLabelFontSize")+"px",zIndex:10,overflow:"hidden"},b=function(a,b,c,d){return function(e){var f=c.annotation;f.hasOwnProperty(a)?f[a](f,c,d.dygraph_,e):d.dygraph_.attr_(b)&&d.dygraph_.attr_(b)(f,c,d.dygraph_,e)}},c=this.layout.annotated_points;for(var d=0;d<c.length;d++){var e=c[d];if(e.canvasx<this.area.x||e.canvasx>this.area.x+this.area.w||e.canvasy<this.area.y||e.canvasy>this.area.y+this.area.h)continue;var f=e.annotation,g=6;f.hasOwnProperty("tickHeight")&&(g=f.tickHeight);var h=document.createElement("div");for(var i in a)a.hasOwnProperty(i)&&(h.style[i]=a[i]);f.hasOwnProperty("icon")||(h.className="dygraphDefaultAnnotation"),f.hasOwnProperty("cssClass")&&(h.className+=" "+f.cssClass);var j=f.hasOwnProperty("width")?f.width:16,k=f.hasOwnProperty("height")?f.height:16;if(f.hasOwnProperty("icon")){var l=document.createElement("img");l.src=f.icon,l.width=j,l.height=k,h.appendChild(l)}else e.annotation.hasOwnProperty("shortText")&&h.appendChild(document.createTextNode(e.annotation.shortText));h.style.left=e.canvasx-j/2+"px",f.attachAtBottom?h.style.top=this.area.h-k-g+"px":h.style.top=e.canvasy-k-g+"px",h.style.width=j+"px",h.style.height=k+"px",h.title=e.annotation.text,h.style.color=this.colors[e.name],h.style.borderColor=this.colors[e.name],f.div=h,Dygraph.addEvent(h,"click",b("clickHandler","annotationClickHandler",e,this)),Dygraph.addEvent(h,"mouseover",b("mouseOverHandler","annotationMouseOverHandler",e,this)),Dygraph.addEvent(h,"mouseout",b("mouseOutHandler","annotationMouseOutHandler",e,this)),Dygraph.addEvent(h,"dblclick",b("dblClickHandler","annotationDblClickHandler",e,this)),this.container.appendChild(h),this.annotations.push(h);var m=this.elementContext;m.strokeStyle=this.colors[e.name],m.beginPath(),f.attachAtBottom?(m.moveTo(e.canvasx,this.area.h),m.lineTo(e.canvasx,this.area.h-2-g)):(m.moveTo(e.canvasx,e.canvasy),m.lineTo(e.canvasx,e.canvasy-2-g)),m.closePath(),m.stroke()}},DygraphCanvasRenderer.makeNextPointStep_=function(a,b,c){return a?function(a){while(++a<c)if(b[a].yval!==null)break;return a}:function(a){return a+1}},DygraphCanvasRenderer.prototype._drawStyledLine=function(a,b,c,d,e,f,g,h,i){var j=function(a){return a===null||isNaN(a)},k=this.attr_("stepPlot"),l=this.layout.setPointsOffsets[b],m=this.layout.setPointsLengths[b],n=l+m,o=this.layout.points,p=null,q=null,r=[];Dygraph.isArrayLike(f)||(f=null);var s,t=DygraphCanvasRenderer.makeNextPointStep_(this.attr_("connectSeparatedPoints"),o,n);a.save();for(var u=l;u<n;u=t(u)){s=o[u];if(j(s.canvasy))k&&p!==null&&(a.beginPath(),a.strokeStyle=d,a.lineWidth=this.attr_("strokeWidth"),this._dashedLine(a,p,q,s.canvasx,q,f),a.stroke()),p=q=null;else{var v=!p&&(u==o.length-1||j(o[u+1].canvasy));if(p===null)p=s.canvasx,q=s.canvasy;else{if(Math.round(p)==Math.round(s.canvasx)&&Math.round(q)==Math.round(s.canvasy))continue;e&&(a.beginPath(),a.strokeStyle=d,a.lineWidth=e,k&&(this._dashedLine(a,p,q,s.canvasx,q,f),p=s.canvasx),this._dashedLine(a,p,q,s.canvasx,s.canvasy,f),p=s.canvasx,q=s.canvasy,a.stroke())}(g||v)&&r.push([s.canvasx,s.canvasy])}}for(var w=0;w<r.length;w++){var x=r[w];a.save(),h(this.dygraph_,c,a,x[0],x[1],d,i),a.restore()}a.restore()},DygraphCanvasRenderer.prototype._drawLine=function(a,b){var c=this.layout.setNames,d=c[b],e=this.dygraph_.attr_("strokeWidth",d),f=this.dygraph_.attr_("strokeBorderWidth",d),g=this.dygraph_.attr_("drawPointCallback",d)||Dygraph.Circles.DEFAULT;f&&e&&this._drawStyledLine(a,b,d,this.dygraph_.attr_("strokeBorderColor",d),e+2*f,this.dygraph_.attr_("strokePattern",d),this.dygraph_.attr_("drawPoints",d),g,this.dygraph_.attr_("pointSize",d)),this._drawStyledLine(a,b,d,this.colors[d],e,this.dygraph_.attr_("strokePattern",d),this.dygraph_.attr_("drawPoints",d),g,this.dygraph_.attr_("pointSize",d))},DygraphCanvasRenderer.prototype._renderLineChart=function(){var a=this.elementContext,b=this.attr_("fillAlpha"),c=this.attr_("errorBars")||this.attr_("customBars"),d=this.attr_("fillGraph"),e=this.attr_("stackedGraph"),f=this.attr_("stepPlot"),g=this.layout.points,h=g.length,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this.layout.setNames,w=v.length;this.colors={};for(j=0;j<w;j++)this.colors[v[j]]=this.colorScheme_[j%this.colorScheme_.length];for(j=h;j--;)i=g[j],i.canvasx=this.area.w*i.x+this.area.x,i.canvasy=this.area.h*i.y+this.area.y;if(c){a.save(),d&&this.dygraph_.warn("Can't use fillGraph option with error bars");for(j=0;j<w;j++){p=v[j],u=this.dygraph_.axisPropertiesForSeries(p),o=this.colors[p];var x=this.layout.setPointsOffsets[j],y=this.layout.setPointsLengths[j],z=x+y,A=DygraphCanvasRenderer.makeNextPointStep_(this.attr_("connectSeparatedPoints"),g,z);l=NaN,m=NaN,n=[-1,-1],t=u.yscale,s=new RGBColor(o),r="rgba("+s.r+","+s.g+","+s.b+","+b+")",a.fillStyle=r,a.beginPath();for(k=x;k<z;k=A(k)){i=g[k];if(i.name==p){if(!Dygraph.isOK(i.y)){l=NaN;continue}f?(q=[i.y_bottom,i.y_top],m=i.y):q=[i.y_bottom,i.y_top],q[0]=this.area.h*q[0]+this.area.y,q[1]=this.area.h*q[1]+this.area.y,isNaN(l)||(f?a.moveTo(l,q[0]):a.moveTo(l,n[0]),a.lineTo(i.canvasx,q[0]),a.lineTo(i.canvasx,q[1]),f?a.lineTo(l,q[1]):a.lineTo(l,n[1]),a.closePath()),n=q,l=i.canvasx}}a.fill()}a.restore()}else if(d){a.save();var B=[];for(j=w-1;j>=0;j--){p=v[j],o=this.colors[p],u=this.dygraph_.axisPropertiesForSeries(p);var C=1+u.minyval*u.yscale;C<0?C=0:C>1&&(C=1),C=this.area.h*C+this.area.y;var x=this.layout.setPointsOffsets[j],y=this.layout.setPointsLengths[j],z=x+y,A=DygraphCanvasRenderer.makeNextPointStep_(this.attr_("connectSeparatedPoints"),g,z);l=NaN,n=[-1,-1],t=u.yscale,s=new RGBColor(o),r="rgba("+s.r+","+s.g+","+s.b+","+b+")",a.fillStyle=r,a.beginPath();for(k=x;k<z;k=A(k)){i=g[k];if(i.name==p){if(!Dygraph.isOK(i.y)){l=NaN;continue}if(e){var D=B[i.canvasx];D===undefined&&(D=C),B[i.canvasx]=i.canvasy,q=[i.canvasy,D]}else q=[i.canvasy,C];isNaN(l)||(a.moveTo(l,n[0]),f?a.lineTo(i.canvasx,n[0]):a.lineTo(i.canvasx,q[0]),a.lineTo(i.canvasx,q[1]),a.lineTo(l,n[1]),a.closePath()),n=q,l=i.canvasx}}a.fill()}a.restore()}for(j=0;j<w;j+=1)this._drawLine(a,j)},DygraphCanvasRenderer.prototype._dashedLine=function(a,b,c,d,e,f){var g,h,i,j,k,l;if(!f||f.length<=1){a.moveTo(b,c),a.lineTo(d,e);return}Dygraph.compareArrays(f,this._dashedLineToHistoryPattern)||(this._dashedLineToHistoryPattern=f,this._dashedLineToHistory=[0,0]),a.save(),g=d-b,h=e-c,i=Math.sqrt(g*g+h*h),j=Math.atan2(h,g),a.translate(b,c),a.moveTo(0,0),a.rotate(j),k=this._dashedLineToHistory[0],b=0;while(i>b)l=f[k],this._dashedLineToHistory[1]?b+=this._dashedLineToHistory[1]:b+=l,b>i?(this._dashedLineToHistory=[k,b-i],b=i):this._dashedLineToHistory=[(k+1)%f.length,0],k%2===0?a.lineTo(b,0):a.moveTo(b,0),k=(k+1)%f.length;a.restore()},"use strict";var Dygraph=function(a,b,c){arguments.length>0&&(arguments.length==4?(this.warn("Using deprecated four-argument dygraph constructor"),this.__old_init__(a,b,arguments[2],arguments[3])):this.__init__(a,b,c))};Dygraph.NAME="Dygraph",Dygraph.VERSION="1.2",Dygraph.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"},Dygraph.toString=function(){return this.__repr__()},Dygraph.DEFAULT_ROLL_PERIOD=1,Dygraph.DEFAULT_WIDTH=480,Dygraph.DEFAULT_HEIGHT=320,Dygraph.ANIMATION_STEPS=10,Dygraph.ANIMATION_DURATION=200,Dygraph.numberValueFormatter=function(a,b,c,d){var e=b("sigFigs");if(e!==null)return Dygraph.floatFormat(a,e);var f=b("digitsAfterDecimal"),g=b("maxNumberWidth");return a!==0&&(Math.abs(a)>=Math.pow(10,g)||Math.abs(a)<Math.pow(10,-f))?a.toExponential(f):""+Dygraph.round_(a,f)},Dygraph.numberAxisLabelFormatter=function(a,b,c,d){return Dygraph.numberValueFormatter(a,c,d)},Dygraph.dateString_=function(a){var b=Dygraph.zeropad,c=new Date(a),d=""+c.getFullYear(),e=b(c.getMonth()+1),f=b(c.getDate()),g="",h=c.getHours()*3600+c.getMinutes()*60+c.getSeconds();return h&&(g=" "+Dygraph.hmsString_(a)),d+"/"+e+"/"+f+g},Dygraph.dateAxisFormatter=function(a,b){if(b>=Dygraph.DECADAL)return a.strftime("%Y");if(b>=Dygraph.MONTHLY)return a.strftime("%b %y");var c=a.getHours()*3600+a.getMinutes()*60+a.getSeconds()+a.getMilliseconds();return c===0||b>=Dygraph.DAILY?(new Date(a.getTime()+36e5)).strftime("%d%b"):Dygraph.hmsString_(a.getTime())},Dygraph.DEFAULT_ATTRS={highlightCircleSize:3,highlightSeriesOpts:null,highlightSeriesBackgroundAlpha:.5,labelsDivWidth:250,labelsDivStyles:{},labelsSeparateLines:!1,labelsShowZeroValues:!0,labelsKMB:!1,labelsKMG2:!1,showLabelsOnHighlight:!0,digitsAfterDecimal:2,maxNumberWidth:6,sigFigs:null,strokeWidth:1,strokeBorderWidth:0,strokeBorderColor:"white",axisTickSize:3,axisLabelFontSize:14,xAxisLabelWidth:50,yAxisLabelWidth:50,rightGap:5,showRoller:!1,xValueParser:Dygraph.dateParser,delimiter:",",sigma:2,errorBars:!1,fractions:!1,wilsonInterval:!0,customBars:!1,fillGraph:!1,fillAlpha:.15,connectSeparatedPoints:!1,stackedGraph:!1,hideOverlayOnMouseOut:!0,legend:"onmouseover",stepPlot:!1,avoidMinZero:!1,titleHeight:28,xLabelHeight:18,yLabelWidth:18,drawXAxis:!0,drawYAxis:!0,axisLineColor:"black",axisLineWidth:.3,gridLineWidth:.3,axisLabelColor:"black",axisLabelFont:"Arial",axisLabelWidth:50,drawYGrid:!0,drawXGrid:!0,gridLineColor:"rgb(128,128,128)",interactionModel:null,animatedZooms:!1,showRangeSelector:!1,rangeSelectorHeight:40,rangeSelectorPlotStrokeColor:"#808FAB",rangeSelectorPlotFillColor:"#A7B1C4",axes:{x:{pixelsPerLabel:60,axisLabelFormatter:Dygraph.dateAxisFormatter,valueFormatter:Dygraph.dateString_,ticker:null},y:{pixelsPerLabel:30,valueFormatter:Dygraph.numberValueFormatter,axisLabelFormatter:Dygraph.numberAxisLabelFormatter,ticker:null},y2:{pixelsPerLabel:30,valueFormatter:Dygraph.numberValueFormatter,axisLabelFormatter:Dygraph.numberAxisLabelFormatter,ticker:null}}},Dygraph.HORIZONTAL=1,Dygraph.VERTICAL=2,Dygraph.addedAnnotationCSS=!1,Dygraph.prototype.__old_init__=function(a,b,c,d){if(c!==null){var e=["Date"];for(var f=0;f<c.length;f++)e.push(c[f]);Dygraph.update(d,{labels:e})}this.__init__(a,b,d)},Dygraph.prototype.__init__=function(a,b,c){if(/MSIE/.test(navigator.userAgent)&&!window.opera&&typeof G_vmlCanvasManager!="undefined"&&document.readyState!="complete"){var d=this;setTimeout(function(){d.__init__(a,b,c)},100);return}if(c===null||c===undefined)c={};c=Dygraph.mapLegacyOptions_(c);if(!a){Dygraph.error("Constructing dygraph with a non-existent div!");return}this.isUsingExcanvas_=typeof G_vmlCanvasManager!="undefined",this.maindiv_=a,this.file_=b,this.rollPeriod_=c.rollPeriod||Dygraph.DEFAULT_ROLL_PERIOD,this.previousVerticalX_=-1,this.fractions_=c.fractions||!1,this.dateWindow_=c.dateWindow||null,this.is_initial_draw_=!0,this.annotations_=[],this.zoomed_x_=!1,this.zoomed_y_=!1,a.innerHTML="",a.style.width===""&&c.width&&(a.style.width=c.width+"px"),a.style.height===""&&c.height&&(a.style.height=c.height+"px"),a.style.height===""&&a.clientHeight===0&&(a.style.height=Dygraph.DEFAULT_HEIGHT+"px",a.style.width===""&&(a.style.width=Dygraph.DEFAULT_WIDTH+"px")),this.width_=a.clientWidth,this.height_=a.clientHeight,c.stackedGraph&&(c.fillGraph=!0),this.user_attrs_={},Dygraph.update(this.user_attrs_,c),this.attrs_={},Dygraph.updateDeep(this.attrs_,Dygraph.DEFAULT_ATTRS),this.boundaryIds_=[],this.setIndexByName_={},this.datasetIndex_=[],this.createInterface_(),this.start_()},Dygraph.prototype.isZoomed=function(a){if(a==null)return this.zoomed_x_||this.zoomed_y_;if(a==="x")return this.zoomed_x_;if(a==="y")return this.zoomed_y_;throw"axis parameter is ["+a+"] must be null, 'x' or 'y'."},Dygraph.prototype.toString=function(){var a=this.maindiv_,b=a&&a.id?a.id:a;return"[Dygraph "+b+"]"},Dygraph.prototype.attr_=function(a,b){var c=[];c.push(this.attrs_),this.user_attrs_&&(c.push(this.user_attrs_),b&&(this.user_attrs_.hasOwnProperty(b)&&c.push(this.user_attrs_[b]),b===this.highlightSet_&&this.user_attrs_.hasOwnProperty("highlightSeriesOpts")&&c.push(this.user_attrs_.highlightSeriesOpts)));var d=null;for(var e=c.length-1;e>=0;--e){var f=c[e];if(f.hasOwnProperty(a)){d=f[a];break}}return d},Dygraph.prototype.optionsViewForAxis_=function(a){var b=this;return function(c){var d=b.user_attrs_.axes;return d&&d[a]&&d[a][c]?d[a][c]:typeof b.user_attrs_[c]!="undefined"?b.user_attrs_[c]:(d=b.attrs_.axes,d&&d[a]&&d[a][c]?d[a][c]:a=="y"&&b.axes_[0].hasOwnProperty(c)?b.axes_[0][c]:a=="y2"&&b.axes_[1].hasOwnProperty(c)?b.axes_[1][c]:b.attr_(c))}},Dygraph.prototype.rollPeriod=function(){return this.rollPeriod_},Dygraph.prototype.xAxisRange=function(){return this.dateWindow_?this.dateWindow_:this.xAxisExtremes()},Dygraph.prototype.xAxisExtremes=function(){var a=this.rawData_[0][0],b=this.rawData_[this.rawData_.length-1][0];return[a,b]},Dygraph.prototype.yAxisRange=function(a){typeof a=="undefined"&&(a=0);if(a<0||a>=this.axes_.length)return null;var b=this.axes_[a];return[b.computedValueRange[0],b.computedValueRange[1]]},Dygraph.prototype.yAxisRanges=function(){var a=[];for(var b=0;b<this.axes_.length;b++)a.push(this.yAxisRange(b));return a},Dygraph.prototype.toDomCoords=function(a,b,c){return[this.toDomXCoord(a),this.toDomYCoord(b,c)]},Dygraph.prototype.toDomXCoord=function(a){if(a===null)return null;var b=this.plotter_.area,c=this.xAxisRange();return b.x+(a-c[0])/(c[1]-c[0])*b.w},Dygraph.prototype.toDomYCoord=function(a,b){var c=this.toPercentYCoord(a,b);if(c===null)return null;var d=this.plotter_.area;return d.y+c*d.h},Dygraph.prototype.toDataCoords=function(a,b,c){return[this.toDataXCoord(a),this.toDataYCoord(b,c)]},Dygraph.prototype.toDataXCoord=function(a){if(a===null)return null;var b=this.plotter_.area,c=this.xAxisRange();return c[0]+(a-b.x)/b.w*(c[1]-c[0])},Dygraph.prototype.toDataYCoord=function(a,b){if(a===null)return null;var c=this.plotter_.area,d=this.yAxisRange(b);typeof b=="undefined"&&(b=0);if(!this.axes_[b].logscale)return d[0]+(c.y+c.h-a)/c.h*(d[1]-d[0]);var e=(a-c.y)/c.h,f=Dygraph.log10(d[1]),g=f-e*(f-Dygraph.log10(d[0])),h=Math.pow(Dygraph.LOG_SCALE,g);return h},Dygraph.prototype.toPercentYCoord=function(a,b){if(a===null)return null;typeof b=="undefined"&&(b=0);var c=this.yAxisRange(b),d;if(!this.axes_[b].logscale)d=(c[1]-a)/(c[1]-c[0]);else{
var e=Dygraph.log10(c[1]);d=(e-Dygraph.log10(a))/(e-Dygraph.log10(c[0]))}return d},Dygraph.prototype.toPercentXCoord=function(a){if(a===null)return null;var b=this.xAxisRange();return(a-b[0])/(b[1]-b[0])},Dygraph.prototype.numColumns=function(){return this.rawData_[0]?this.rawData_[0].length:this.attr_("labels").length},Dygraph.prototype.numRows=function(){return this.rawData_.length},Dygraph.prototype.fullXRange_=function(){return this.numRows()>0?[this.rawData_[0][0],this.rawData_[this.numRows()-1][0]]:[0,1]},Dygraph.prototype.getValue=function(a,b){return a<0||a>this.rawData_.length?null:b<0||b>this.rawData_[a].length?null:this.rawData_[a][b]},Dygraph.prototype.createInterface_=function(){var a=this.maindiv_;this.graphDiv=document.createElement("div"),this.graphDiv.style.width=this.width_+"px",this.graphDiv.style.height=this.height_+"px",a.appendChild(this.graphDiv),this.canvas_=Dygraph.createCanvas(),this.canvas_.style.position="absolute",this.canvas_.width=this.width_,this.canvas_.height=this.height_,this.canvas_.style.width=this.width_+"px",this.canvas_.style.height=this.height_+"px",this.canvas_ctx_=Dygraph.getContext(this.canvas_),this.hidden_=this.createPlotKitCanvas_(this.canvas_),this.hidden_ctx_=Dygraph.getContext(this.hidden_),this.attr_("showRangeSelector")&&(this.rangeSelector_=new DygraphRangeSelector(this)),this.graphDiv.appendChild(this.hidden_),this.graphDiv.appendChild(this.canvas_),this.mouseEventElement_=this.createMouseEventElement_(),this.layout_=new DygraphLayout(this),this.rangeSelector_&&this.rangeSelector_.addToGraph(this.graphDiv,this.layout_);var b=this;this.mouseMoveHandler=function(a){b.mouseMove_(a)},Dygraph.addEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler),this.mouseOutHandler=function(a){b.mouseOut_(a)},Dygraph.addEvent(this.mouseEventElement_,"mouseout",this.mouseOutHandler),this.createStatusMessage_(),this.createDragInterface_(),this.resizeHandler=function(a){b.resize()},Dygraph.addEvent(window,"resize",this.resizeHandler)},Dygraph.prototype.destroy=function(){var a=function(b){while(b.hasChildNodes())a(b.firstChild),b.removeChild(b.firstChild)};Dygraph.removeEvent(this.mouseEventElement_,"mouseout",this.mouseOutHandler),Dygraph.removeEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler),Dygraph.removeEvent(this.mouseEventElement_,"mousemove",this.mouseUpHandler_),a(this.maindiv_);var b=function(a){for(var b in a)typeof a[b]=="object"&&(a[b]=null)};Dygraph.removeEvent(window,"resize",this.resizeHandler),this.resizeHandler=null,b(this.layout_),b(this.plotter_),b(this)},Dygraph.prototype.createPlotKitCanvas_=function(a){var b=Dygraph.createCanvas();return b.style.position="absolute",b.style.top=a.style.top,b.style.left=a.style.left,b.width=this.width_,b.height=this.height_,b.style.width=this.width_+"px",b.style.height=this.height_+"px",b},Dygraph.prototype.createMouseEventElement_=function(){if(this.isUsingExcanvas_){var a=document.createElement("div");return a.style.position="absolute",a.style.backgroundColor="white",a.style.filter="alpha(opacity=0)",a.style.width=this.width_+"px",a.style.height=this.height_+"px",this.graphDiv.appendChild(a),a}return this.canvas_},Dygraph.prototype.setColors_=function(){var a=this.attr_("labels").length-1;this.colors_=[];var b=this.attr_("colors"),c;if(!b){var d=this.attr_("colorSaturation")||1,e=this.attr_("colorValue")||.5,f=Math.ceil(a/2);for(c=1;c<=a;c++){if(!this.visibility()[c-1])continue;var g=c%2?Math.ceil(c/2):f+c/2,h=1*g/(1+a);this.colors_.push(Dygraph.hsvToRGB(h,d,e))}}else for(c=0;c<a;c++){if(!this.visibility()[c])continue;var i=b[c%b.length];this.colors_.push(i)}this.plotter_.setColors(this.colors_)},Dygraph.prototype.getColors=function(){return this.colors_},Dygraph.prototype.createStatusMessage_=function(){var a=this.user_attrs_.labelsDiv;a&&null!==a&&(typeof a=="string"||a instanceof String)&&(this.user_attrs_.labelsDiv=document.getElementById(a));if(!this.attr_("labelsDiv")){var b=this.attr_("labelsDivWidth"),c={position:"absolute",fontSize:"14px",zIndex:10,width:b+"px",top:"0px",left:this.width_-b-2+"px",background:"white",lineHeight:"normal",textAlign:"left",overflow:"hidden"};Dygraph.update(c,this.attr_("labelsDivStyles"));var d=document.createElement("div");d.className="dygraph-legend";for(var e in c)if(c.hasOwnProperty(e))try{d.style[e]=c[e]}catch(f){this.warn("You are using unsupported css properties for your browser in labelsDivStyles")}this.graphDiv.appendChild(d),this.attrs_.labelsDiv=d}},Dygraph.prototype.positionLabelsDiv_=function(){if(this.user_attrs_.hasOwnProperty("labelsDiv"))return;var a=this.plotter_.area,b=this.attr_("labelsDiv");b.style.left=a.x+a.w-this.attr_("labelsDivWidth")-1+"px",b.style.top=a.y+"px"},Dygraph.prototype.createRollInterface_=function(){this.roller_||(this.roller_=document.createElement("input"),this.roller_.type="text",this.roller_.style.display="none",this.graphDiv.appendChild(this.roller_));var a=this.attr_("showRoller")?"block":"none",b=this.plotter_.area,c={position:"absolute",zIndex:10,top:b.y+b.h-25+"px",left:b.x+1+"px",display:a};this.roller_.size="2",this.roller_.value=this.rollPeriod_;for(var d in c)c.hasOwnProperty(d)&&(this.roller_.style[d]=c[d]);var e=this;this.roller_.onchange=function(){e.adjustRoll(e.roller_.value)}},Dygraph.prototype.dragGetX_=function(a,b){return Dygraph.pageX(a)-b.px},Dygraph.prototype.dragGetY_=function(a,b){return Dygraph.pageY(a)-b.py},Dygraph.prototype.createDragInterface_=function(){var a={isZooming:!1,isPanning:!1,is2DPan:!1,dragStartX:null,dragStartY:null,dragEndX:null,dragEndY:null,dragDirection:null,prevEndX:null,prevEndY:null,prevDragDirection:null,cancelNextDblclick:!1,initialLeftmostDate:null,xUnitsPerPixel:null,dateRange:null,px:0,py:0,boundedDates:null,boundedValues:null,initializeMouseDown:function(a,b,c){a.preventDefault?a.preventDefault():(a.returnValue=!1,a.cancelBubble=!0),c.px=Dygraph.findPosX(b.canvas_),c.py=Dygraph.findPosY(b.canvas_),c.dragStartX=b.dragGetX_(a,c),c.dragStartY=b.dragGetY_(a,c),c.cancelNextDblclick=!1}},b=this.attr_("interactionModel"),c=this,d=function(b){return function(d){b(d,c,a)}};for(var e in b){if(!b.hasOwnProperty(e))continue;Dygraph.addEvent(this.mouseEventElement_,e,d(b[e]))}this.mouseUpHandler_=function(b){if(a.isZooming||a.isPanning)a.isZooming=!1,a.dragStartX=null,a.dragStartY=null;if(a.isPanning){a.isPanning=!1,a.draggingDate=null,a.dateRange=null;for(var d=0;d<c.axes_.length;d++)delete c.axes_[d].draggingValue,delete c.axes_[d].dragValueRange}},Dygraph.addEvent(document,"mouseup",this.mouseUpHandler_)},Dygraph.prototype.drawZoomRect_=function(a,b,c,d,e,f,g,h){var i=this.canvas_ctx_;f==Dygraph.HORIZONTAL?i.clearRect(Math.min(b,g),this.layout_.getPlotArea().y,Math.abs(b-g),this.layout_.getPlotArea().h):f==Dygraph.VERTICAL&&i.clearRect(this.layout_.getPlotArea().x,Math.min(d,h),this.layout_.getPlotArea().w,Math.abs(d-h)),a==Dygraph.HORIZONTAL?c&&b&&(i.fillStyle="rgba(128,128,128,0.33)",i.fillRect(Math.min(b,c),this.layout_.getPlotArea().y,Math.abs(c-b),this.layout_.getPlotArea().h)):a==Dygraph.VERTICAL&&e&&d&&(i.fillStyle="rgba(128,128,128,0.33)",i.fillRect(this.layout_.getPlotArea().x,Math.min(d,e),this.layout_.getPlotArea().w,Math.abs(e-d))),this.isUsingExcanvas_&&(this.currentZoomRectArgs_=[a,b,c,d,e,0,0,0])},Dygraph.prototype.clearZoomRect_=function(){this.currentZoomRectArgs_=null,this.canvas_ctx_.clearRect(0,0,this.canvas_.width,this.canvas_.height)},Dygraph.prototype.doZoomX_=function(a,b){this.currentZoomRectArgs_=null;var c=this.toDataXCoord(a),d=this.toDataXCoord(b);this.doZoomXDates_(c,d)},Dygraph.zoomAnimationFunction=function(a,b){var c=1.5;return(1-Math.pow(c,-a))/(1-Math.pow(c,-b))},Dygraph.prototype.doZoomXDates_=function(a,b){var c=this.xAxisRange(),d=[a,b];this.zoomed_x_=!0;var e=this;this.doAnimatedZoom(c,d,null,null,function(){e.attr_("zoomCallback")&&e.attr_("zoomCallback")(a,b,e.yAxisRanges())})},Dygraph.prototype.doZoomY_=function(a,b){this.currentZoomRectArgs_=null;var c=this.yAxisRanges(),d=[];for(var e=0;e<this.axes_.length;e++){var f=this.toDataYCoord(a,e),g=this.toDataYCoord(b,e);d.push([g,f])}this.zoomed_y_=!0;var h=this;this.doAnimatedZoom(null,null,c,d,function(){if(h.attr_("zoomCallback")){var a=h.xAxisRange();h.attr_("zoomCallback")(a[0],a[1],h.yAxisRanges())}})},Dygraph.prototype.doUnzoom_=function(){var a=!1,b=!1,c=!1;this.dateWindow_!==null&&(a=!0,b=!0);for(var d=0;d<this.axes_.length;d++)typeof this.axes_[d].valueWindow!="undefined"&&this.axes_[d].valueWindow!==null&&(a=!0,c=!0);this.clearSelection();if(a){this.zoomed_x_=!1,this.zoomed_y_=!1;var e=this.rawData_[0][0],f=this.rawData_[this.rawData_.length-1][0];if(!this.attr_("animatedZooms")){this.dateWindow_=null;for(d=0;d<this.axes_.length;d++)this.axes_[d].valueWindow!==null&&delete this.axes_[d].valueWindow;this.drawGraph_(),this.attr_("zoomCallback")&&this.attr_("zoomCallback")(e,f,this.yAxisRanges());return}var g=null,h=null,i=null,j=null;b&&(g=this.xAxisRange(),h=[e,f]);if(c){i=this.yAxisRanges();var k=this.gatherDatasets_(this.rolledSeries_,null),l=k[1];this.computeYAxisRanges_(l),j=[];for(d=0;d<this.axes_.length;d++){var m=this.axes_[d];j.push(m.valueRange!=null?m.valueRange:m.extremeRange)}}var n=this;this.doAnimatedZoom(g,h,i,j,function(){n.dateWindow_=null;for(var a=0;a<n.axes_.length;a++)n.axes_[a].valueWindow!==null&&delete n.axes_[a].valueWindow;n.attr_("zoomCallback")&&n.attr_("zoomCallback")(e,f,n.yAxisRanges())})}},Dygraph.prototype.doAnimatedZoom=function(a,b,c,d,e){var f=this.attr_("animatedZooms")?Dygraph.ANIMATION_STEPS:1,g=[],h=[],i,j;if(a!==null&&b!==null)for(i=1;i<=f;i++)j=Dygraph.zoomAnimationFunction(i,f),g[i-1]=[a[0]*(1-j)+j*b[0],a[1]*(1-j)+j*b[1]];if(c!==null&&d!==null)for(i=1;i<=f;i++){j=Dygraph.zoomAnimationFunction(i,f);var k=[];for(var l=0;l<this.axes_.length;l++)k.push([c[l][0]*(1-j)+j*d[l][0],c[l][1]*(1-j)+j*d[l][1]]);h[i-1]=k}var m=this;Dygraph.repeatAndCleanup(function(a){if(h.length)for(var b=0;b<m.axes_.length;b++){var c=h[a][b];m.axes_[b].valueWindow=[c[0],c[1]]}g.length&&(m.dateWindow_=g[a]),m.drawGraph_()},f,Dygraph.ANIMATION_DURATION/f,e)},Dygraph.prototype.getArea=function(){return this.plotter_.area},Dygraph.prototype.eventToDomCoords=function(a){var b=Dygraph.pageX(a)-Dygraph.findPosX(this.mouseEventElement_),c=Dygraph.pageY(a)-Dygraph.findPosY(this.mouseEventElement_);return[b,c]},Dygraph.prototype.findClosestRow=function(a){var b=Infinity,c=-1,d=this.layout_.points,e=d.length;for(var f=0;f<e;f++){var g=d[f];if(!Dygraph.isValidPoint(g,!0))continue;var h=Math.abs(g.canvasx-a);h<b&&(b=h,c=f)}return this.idxToRow_(c)},Dygraph.prototype.findClosestPoint=function(a,b){var c=Infinity,d=-1,e=this.layout_.points,f,g,h,i,j,k;for(var l=0;l<this.layout_.datasets.length;++l){var m=this.layout_.setPointsOffsets[l],n=this.layout_.setPointsLengths[l];for(var o=0;o<n;++o){var i=e[m+o];if(!Dygraph.isValidPoint(i))continue;g=i.canvasx-a,h=i.canvasy-b,f=g*g+h*h,f<c&&(c=f,j=i,k=l,d=o)}}var p=this.layout_.setNames[k];return{row:d+this.getLeftBoundary_(),seriesName:p,point:j}},Dygraph.prototype.findStackedPoint=function(a,b){var c=this.findClosestRow(a),d=this.getLeftBoundary_(),e=c-d,f=this.layout_.points,g,h;for(var i=0;i<this.layout_.datasets.length;++i){var j=this.layout_.setPointsOffsets[i],k=this.layout_.setPointsLengths[i];if(e>=k)continue;var l=f[j+e];if(!Dygraph.isValidPoint(l))continue;var m=l.canvasy;if(a>l.canvasx&&e+1<k){var n=f[j+e+1];if(Dygraph.isValidPoint(n)){var o=n.canvasx-l.canvasx;if(o>0){var p=(a-l.canvasx)/o;m+=p*(n.canvasy-l.canvasy)}}}else if(a<l.canvasx&&e>0){var q=f[j+e-1];if(Dygraph.isValidPoint(q)){var o=l.canvasx-q.canvasx;if(o>0){var p=(l.canvasx-a)/o;m+=p*(q.canvasy-l.canvasy)}}}if(i==0||m<b)g=l,h=i}var r=this.layout_.setNames[h];return{row:c,seriesName:r,point:g}},Dygraph.prototype.mouseMove_=function(a){var b=this.layout_.points;if(b===undefined)return;var c=this.eventToDomCoords(a),d=c[0],e=c[1],f=this.attr_("highlightSeriesOpts"),g=!1;if(f){var h;this.attr_("stackedGraph")?h=this.findStackedPoint(d,e):h=this.findClosestPoint(d,e),g=this.setSelection(h.row,h.seriesName)}else{var i=this.findClosestRow(d);g=this.setSelection(i)}var j=this.attr_("highlightCallback");j&&g&&j(a,this.lastx_,this.selPoints_,this.lastRow_,this.highlightSet_)},Dygraph.prototype.getLeftBoundary_=function(){for(var a=0;a<this.boundaryIds_.length;a++)if(this.boundaryIds_[a]!==undefined)return this.boundaryIds_[a][0];return 0},Dygraph.prototype.idxToRow_=function(a){if(a<0)return-1;var b=this.getLeftBoundary_();for(var c=0;c<this.layout_.datasets.length;++c){var d=this.layout_.datasets[c];if(a<d.length)return b+a;a-=d.length}return-1},Dygraph.prototype.generateLegendDashHTML_=function(a,b,c){var d="",e,f,g,h,i=0,j=0,k=[],l,m=/MSIE/.test(navigator.userAgent)&&!window.opera;if(m)return"&mdash;";if(!a||a.length<=1)d='<div style="display: inline-block; position: relative; bottom: .5ex; padding-left: 1em; height: 1px; border-bottom: 2px solid '+b+';"></div>';else{for(e=0;e<=a.length;e++)i+=a[e%a.length];l=Math.floor(c/(i-a[0]));if(l>1){for(e=0;e<a.length;e++)k[e]=a[e]/c;j=k.length}else{l=1;for(e=0;e<a.length;e++)k[e]=a[e]/i;j=k.length+1}for(f=0;f<l;f++)for(e=0;e<j;e+=2)g=k[e%k.length],e<a.length?h=k[(e+1)%k.length]:h=0,d+='<div style="display: inline-block; position: relative; bottom: .5ex; margin-right: '+h+"em; padding-left: "+g+"em; height: 1px; border-bottom: 2px solid "+b+';"></div>'}return d},Dygraph.prototype.generateLegendHTML_=function(a,b,c){var d,e,f,g,h,i;if(typeof a=="undefined"){if(this.attr_("legend")!="always")return"";e=this.attr_("labelsSeparateLines");var j=this.attr_("labels");d="";for(f=1;f<j.length;f++){if(!this.visibility()[f-1])continue;g=this.plotter_.colors[j[f]],d!==""&&(d+=e?"<br/>":" "),i=this.attr_("strokePattern",j[f]),h=this.generateLegendDashHTML_(i,g,c),d+="<span style='font-weight: bold; color: "+g+";'>"+h+" "+j[f]+"</span>"}return d}var k=this.optionsViewForAxis_("x"),l=k("valueFormatter");d=l(a,k,this.attr_("labels")[0],this)+":";var m=[],n=this.numAxes();for(f=0;f<n;f++)m[f]=this.optionsViewForAxis_("y"+(f?1+f:""));var o=this.attr_("labelsShowZeroValues");e=this.attr_("labelsSeparateLines");for(f=0;f<this.selPoints_.length;f++){var p=this.selPoints_[f];if(p.yval===0&&!o)continue;if(!Dygraph.isOK(p.canvasy))continue;e&&(d+="<br/>");var q=m[this.seriesToAxisMap_[p.name]],r=q("valueFormatter");g=this.plotter_.colors[p.name];var s=r(p.yval,q,p.name,this),t=p.name==this.highlightSet_?" class='highlight'":"";d+="<span"+t+">"+" <b><span style='color: "+g+";'>"+p.name+":</span></b>"+s+"</span>"}return d},Dygraph.prototype.setLegendHTML_=function(a,b){var c=this.attr_("labelsDiv");if(!c)return;var d=document.createElement("span");d.setAttribute("style","margin: 0; padding: 0 0 0 1em; border: 0;"),c.appendChild(d);var e=d.offsetWidth,f=this.generateLegendHTML_(a,b,e);c!==null?c.innerHTML=f:typeof this.shown_legend_error_=="undefined"&&(this.error("labelsDiv is set to something nonexistent; legend will not be shown."),this.shown_legend_error_=!0)},Dygraph.prototype.animateSelection_=function(a){var b=10,c=30;this.fadeLevel===undefined&&(this.fadeLevel=0),this.animateId===undefined&&(this.animateId=0);var d=this.fadeLevel,e=a<0?d:b-d;if(e<=0){this.fadeLevel&&this.updateSelection_(1);return}var f=++this.animateId,g=this;Dygraph.repeatAndCleanup(function(c){if(g.animateId!=f)return;g.fadeLevel+=a,g.fadeLevel===0?g.clearSelection():g.updateSelection_(g.fadeLevel/b)},e,c,function(){})},Dygraph.prototype.updateSelection_=function(a){var b,c=this.canvas_ctx_;if(this.attr_("highlightSeriesOpts")){c.clearRect(0,0,this.width_,this.height_);var d=1-this.attr_("highlightSeriesBackgroundAlpha");if(d){var e=!0;if(e){if(a===undefined){this.animateSelection_(1);return}d*=a}c.fillStyle="rgba(255,255,255,"+d+")",c.fillRect(0,0,this.width_,this.height_)}var f=this.datasetIndexFromSetName_(this.highlightSet_);this.plotter_._drawLine(c,f)}else if(this.previousVerticalX_>=0){var g=0,h=this.attr_("labels");for(b=1;b<h.length;b++){var i=this.attr_("highlightCircleSize",h[b]);i>g&&(g=i)}var j=this.previousVerticalX_;c.clearRect(j-g-1,0,2*g+2,this.height_)}this.isUsingExcanvas_&&this.currentZoomRectArgs_&&Dygraph.prototype.drawZoomRect_.apply(this,this.currentZoomRectArgs_);if(this.selPoints_.length>0){this.attr_("showLabelsOnHighlight")&&this.setLegendHTML_(this.lastx_,this.selPoints_);var k=this.selPoints_[0].canvasx;c.save();for(b=0;b<this.selPoints_.length;b++){var l=this.selPoints_[b];if(!Dygraph.isOK(l.canvasy))continue;var m=this.attr_("highlightCircleSize",l.name),n=this.attr_("drawHighlightPointCallback",l.name),o=this.plotter_.colors[l.name];n||(n=Dygraph.Circles.DEFAULT),c.lineWidth=this.attr_("strokeWidth",l.name),c.strokeStyle=o,c.fillStyle=o,n(this.g,l.name,c,k,l.canvasy,o,m)}c.restore(),this.previousVerticalX_=k}},Dygraph.prototype.setSelection=function(a,b){this.selPoints_=[];var c=0;a!==!1&&(a-=this.getLeftBoundary_());var d=!1;if(a!==!1&&a>=0){a!=this.lastRow_&&(d=!0),this.lastRow_=a;for(var e=0;e<this.layout_.datasets.length;++e){var f=this.layout_.datasets[e];if(a<f.length){var g=this.layout_.points[c+a];this.attr_("stackedGraph")&&(g=this.layout_.unstackPointAtIndex(c+a)),g.yval!==null&&this.selPoints_.push(g)}c+=f.length}}else this.lastRow_>=0&&(d=!0),this.lastRow_=-1;return this.selPoints_.length?this.lastx_=this.selPoints_[0].xval:this.lastx_=-1,b!==undefined&&(this.highlightSet_!==b&&(d=!0),this.highlightSet_=b),d&&this.updateSelection_(undefined),d},Dygraph.prototype.mouseOut_=function(a){this.attr_("unhighlightCallback")&&this.attr_("unhighlightCallback")(a),this.attr_("hideOverlayOnMouseOut")&&this.clearSelection()},Dygraph.prototype.clearSelection=function(){if(this.fadeLevel){this.animateSelection_(-1);return}this.canvas_ctx_.clearRect(0,0,this.width_,this.height_),this.fadeLevel=0,this.setLegendHTML_(),this.selPoints_=[],this.lastx_=-1,this.lastRow_=-1,this.highlightSet_=null},Dygraph.prototype.getSelection=function(){if(!this.selPoints_||this.selPoints_.length<1)return-1;for(var a=0;a<this.layout_.points.length;a++)if(this.layout_.points[a].x==this.selPoints_[0].x)return a+this.getLeftBoundary_();return-1},Dygraph.prototype.getHighlightSeries=function(){return this.highlightSet_},Dygraph.prototype.loadedEvent_=function(a){this.rawData_=this.parseCSV_(a),this.predraw_()},Dygraph.prototype.addXTicks_=function(){var a;this.dateWindow_?a=[this.dateWindow_[0],this.dateWindow_[1]]:a=this.fullXRange_();var b=this.optionsViewForAxis_("x"),c=b("ticker")(a[0],a[1],this.width_,b,this);this.layout_.setXTicks(c)},Dygraph.prototype.extremeValues_=function(a){var b=null,c=null,d,e,f=this.attr_("errorBars")||this.attr_("customBars");if(f)for(d=0;d<a.length;d++){e=a[d][1][0];if(!e)continue;var g=e-a[d][1][1],h=e+a[d][1][2];g>e&&(g=e),h<e&&(h=e);if(c===null||h>c)c=h;if(b===null||g<b)b=g}else for(d=0;d<a.length;d++){e=a[d][1];if(e===null||isNaN(e))continue;if(c===null||e>c)c=e;if(b===null||e<b)b=e}return[b,c]},Dygraph.prototype.predraw_=function(){var a=new Date;this.computeYAxes_(),this.plotter_&&this.plotter_.clear(),this.plotter_=new DygraphCanvasRenderer(this,this.hidden_,this.hidden_ctx_,this.layout_),this.createRollInterface_(),this.positionLabelsDiv_(),this.rangeSelector_&&this.rangeSelector_.renderStaticLayer(),this.rolledSeries_=[null];for(var b=1;b<this.numColumns();b++){var c=this.attr_("logscale",b),d=this.extractSeries_(this.rawData_,b,c);d=this.rollingAverage(d,this.rollPeriod_),this.rolledSeries_.push(d)}this.drawGraph_();var e=new Date;this.drawingTimeMs_=e-a},Dygraph.prototype.gatherDatasets_=function(a,b){var c=[],d=[],e=[],f={},g,h,i,j=a.length-1;for(g=j;g>=1;g--){if(!this.visibility()[g-1])continue;var k=[];for(h=0;h<a[g].length;h++)k.push(a[g][h]);var l=this.attr_("errorBars")||this.attr_("customBars");if(b){var m=b[0],n=b[1],o=[],p=null,q=null;for(i=0;i<k.length;i++)k[i][0]>=m&&p===null&&(p=i),k[i][0]<=n&&(q=i);p===null&&(p=0),p>0&&p--,q===null&&(q=k.length-1),q<k.length-1&&q++,c[g-1]=[p,q];for(i=p;i<=q;i++)o.push(k[i]);k=o}else c[g-1]=[0,k.length-1];var r=this.extremeValues_(k);if(l)for(h=0;h<k.length;h++)k[h]=[k[h][0],k[h][1][0],k[h][1][1],k[h][1][2]];else if(this.attr_("stackedGraph")){var s=k.length,t;for(h=0;h<s;h++){var u=k[h][0];d[u]===undefined&&(d[u]=0),t=k[h][1];if(t===null){k[h]=[u,null];continue}d[u]+=t,k[h]=[u,d[u]],d[u]>r[1]&&(r[1]=d[u]),d[u]<r[0]&&(r[0]=d[u])}}var v=this.attr_("labels")[g];f[v]=r,e[g]=k}if(this.attr_("stackedGraph"))for(i=e.length-1;i>=0;--i){if(!e[i])continue;for(h=0;h<e[i].length;h++){var u=e[i][h][0];if(isNaN(d[u]))for(g=e.length-1;g>=0;g--){if(!e[g])continue;e[g][h][1]=NaN}}break}return[e,f,c]},Dygraph.prototype.drawGraph_=function(a){var b=new Date;typeof a=="undefined"&&(a=!0);var c=this.is_initial_draw_;this.is_initial_draw_=!1,this.layout_.removeAllDatasets(),this.setColors_(),this.attrs_.pointSize=.5*this.attr_("highlightCircleSize");var d=this.gatherDatasets_(this.rolledSeries_,this.dateWindow_),e=d[0],f=d[1];this.boundaryIds_=d[2],this.setIndexByName_={};var g=this.attr_("labels");g.length>0&&(this.setIndexByName_[g[0]]=0);var h=0;for(var i=1;i<e.length;i++){this.setIndexByName_[g[i]]=i;if(!this.visibility()[i-1])continue;this.layout_.addDataset(g[i],e[i]),this.datasetIndex_[i]=h++}this.computeYAxisRanges_(f),this.layout_.setYAxes(this.axes_),this.addXTicks_();var j=this.zoomed_x_;this.layout_.setDateWindow(this.dateWindow_),this.zoomed_x_=j,this.layout_.evaluateWithError(),this.renderGraph_(c,!1);if(this.attr_("timingName")){var k=new Date;console&&console.log(this.attr_("timingName")+" - drawGraph: "+(k-b)+"ms")}},Dygraph.prototype.renderGraph_=function(a,b){this.plotter_.clear(),this.plotter_.render(),this.canvas_.getContext("2d").clearRect(0,0,this.canvas_.width,this.canvas_.height),this.setLegendHTML_(),a||b&&(typeof this.selPoints_!="undefined"&&this.selPoints_.length?this.clearSelection():this.clearSelection()),this.rangeSelector_&&this.rangeSelector_.renderInteractiveLayer(),this.attr_("drawCallback")!==null&&this.attr_("drawCallback")(this,a)},Dygraph.prototype.computeYAxes_=function(){var a,b,c,d,e,f,g;if(this.axes_!==undefined&&this.user_attrs_.hasOwnProperty("valueRange")===!1){b=[];for(e=0;e<this.axes_.length;e++)b.push(this.axes_[e].valueWindow)}this.axes_=[{yAxisId:0,g:this}],this.seriesToAxisMap_={};var h=this.attr_("labels"),i={};for(a=1;a<h.length;a++)i[h[a]]=a-1;var j=["includeZero","valueRange","labelsKMB","labelsKMG2","pixelsPerYLabel","yAxisLabelWidth","axisLabelFontSize","axisTickSize","logscale"];for(a=0;a<j.length;a++){var k=j[a];g=this.attr_(k),g&&(this.axes_[0][k]=g)}for(c in i){if(!i.hasOwnProperty(c))continue;d=this.attr_("axis",c);if(d===null){this.seriesToAxisMap_[c]=0;continue}if(typeof d=="object"){f={},Dygraph.update(f,this.axes_[0]),Dygraph.update(f,{valueRange:null});var l=this.axes_.length;f.yAxisId=l,f.g=this,Dygraph.update(f,d),this.axes_.push(f),this.seriesToAxisMap_[c]=l}}for(c in i){if(!i.hasOwnProperty(c))continue;d=this.attr_("axis",c);if(typeof d=="string"){if(!this.seriesToAxisMap_.hasOwnProperty(d))return this.error("Series "+c+" wants to share a y-axis with "+"series "+d+", which does not define its own axis."),null;var m=this.seriesToAxisMap_[d];this.seriesToAxisMap_[c]=m}}if(b!==undefined)for(e=0;e<b.length;e++)this.axes_[e].valueWindow=b[e];for(d=0;d<this.axes_.length;d++)if(d===0)f=this.optionsViewForAxis_("y"+(d?"2":"")),g=f("valueRange"),g&&(this.axes_[d].valueRange=g);else{var n=this.user_attrs_.axes;n&&n.y2&&(g=n.y2.valueRange,g&&(this.axes_[d].valueRange=g))}},Dygraph.prototype.numAxes=function(){var a=0;for(var b in this.seriesToAxisMap_){if(!this.seriesToAxisMap_.hasOwnProperty(b))continue;var c=this.seriesToAxisMap_[b];c>a&&(a=c)}return 1+a},Dygraph.prototype.axisPropertiesForSeries=function(a){return this.axes_[this.seriesToAxisMap_[a]]},Dygraph.prototype.computeYAxisRanges_=function(a){var b=[],c;for(c in this.seriesToAxisMap_){if(!this.seriesToAxisMap_.hasOwnProperty(c))continue;var d=this.seriesToAxisMap_[c];while(b.length<=d)b.push([]);b[d].push(c)}for(var e=0;e<this.axes_.length;e++){var f=this.axes_[e];if(!b[e])f.extremeRange=[0,1];else{c=b[e];var g=Infinity,h=-Infinity,i,j;for(var k=0;k<c.length;k++){if(!a.hasOwnProperty(c[k]))continue;i=a[c[k]][0],i!==null&&(g=Math.min(i,g)),j=a[c[k]][1],j!==null&&(h=Math.max(j,h))}f.includeZero&&g>0&&(g=0),g==Infinity&&(g=0),h==-Infinity&&(h=1);var l=h-g;l===0&&(l=h);var m,n;f.logscale?(m=h+.1*l,n=g):(m=h+.1*l,n=g-.1*l,this.attr_("avoidMinZero")||(n<0&&g>=0&&(n=0),m>0&&h<=0&&(m=0)),this.attr_("includeZero")&&(h<0&&(m=0),g>0&&(n=0))),f.extremeRange=[n,m]}f.valueWindow?f.computedValueRange=[f.valueWindow[0],f.valueWindow[1]]:f.valueRange?f.computedValueRange=[f.valueRange[0],f.valueRange[1]]:f.computedValueRange=f.extremeRange;var o=this.optionsViewForAxis_("y"+(e?"2":"")),p=o("ticker");if(e===0||f.independentTicks)f.ticks=p(f.computedValueRange[0],f.computedValueRange[1],this.height_,o,this);else{var q=this.axes_[0],r=q.ticks,s=q.computedValueRange[1]-q.computedValueRange[0],t=f.computedValueRange[1]-f.computedValueRange[0],u=[];for(var v=0;v<r.length;v++){var w=(r[v].v-q.computedValueRange[0])/s,x=f.computedValueRange[0]+w*t;u.push(x)}f.ticks=p(f.computedValueRange[0],f.computedValueRange[1],this.height_,o,this,u)}}},Dygraph.prototype.extractSeries_=function(a,b,c){var d=[];for(var e=0;e<a.length;e++){var f=a[e][0],g=a[e][b];c&&g<=0&&(g=null),d.push([f,g])}return d},Dygraph.prototype.rollingAverage=function(a,b){if(a.length<2)return a;b=Math.min(b,a.length);var c=[],d=this.attr_("sigma"),e,f,g,h,i,j,k,l;if(this.fractions_){var m=0,n=0,o=100;for(g=0;g<a.length;g++){m+=a[g][1][0],n+=a[g][1][1],g-b>=0&&(m-=a[g-b][1][0],n-=a[g-b][1][1]);var p=a[g][0],q=n?m/n:0;if(this.attr_("errorBars"))if(this.attr_("wilsonInterval"))if(n){var r=q<0?0:q,s=n,t=d*Math.sqrt(r*(1-r)/s+d*d/(4*s*s)),u=1+d*d/n;e=(r+d*d/(2*n)-t)/u,f=(r+d*d/(2*n)+t)/u,c[g]=[p,[r*o,(r-e)*o,(f-r)*o]]}else c[g]=[p,[0,0,0]];else l=n?d*Math.sqrt(q*(1-q)/n):1,c[g]=[p,[o*q,o*l,o*l]];else c[g]=[p,o*q]}}else if(this.attr_("customBars")){e=0;var v=0;f=0;var w=0;for(g=0;g<a.length;g++){var x=a[g][1];i=x[1],c[g]=[a[g][0],[i,i-x[0],x[2]-i]],i!==null&&!isNaN(i)&&(e+=x[0],v+=i,f+=x[2],w+=1);if(g-b>=0){var y=a[g-b];y[1][1]!==null&&!isNaN(y[1][1])&&(e-=y[1][0],v-=y[1][1],f-=y[1][2],w-=1)}w?c[g]=[a[g][0],[1*v/w,1*(v-e)/w,1*(f-v)/w]]:c[g]=[a[g][0],[null,null,null]]}}else if(!this.attr_("errorBars")){if(b==1)return a;for(g=0;g<a.length;g++){j=0,k=0;for(h=Math.max(0,g-b+1);h<g+1;h++){i=a[h][1];if(i===null||isNaN(i))continue;k++,j+=a[h][1]}k?c[g]=[a[g][0],j/k]:c[g]=[a[g][0],null]}}else for(g=0;g<a.length;g++){j=0;var z=0;k=0;for(h=Math.max(0,g-b+1);h<g+1;h++){i=a[h][1][0];if(i===null||isNaN(i))continue;k++,j+=a[h][1][0],z+=Math.pow(a[h][1][1],2)}k?(l=Math.sqrt(z)/k,c[g]=[a[g][0],[j/k,d*l,d*l]]):c[g]=[a[g][0],[null,null,null]]}return c},Dygraph.prototype.detectTypeFromString_=function(a){var b=!1,c=a.indexOf("-");c>0&&a[c-1]!="e"&&a[c-1]!="E"||a.indexOf("/")>=0||isNaN(parseFloat(a))?b=!0:a.length==8&&a>"19700101"&&a<"20371231"&&(b=!0),b?(this.attrs_.xValueParser=Dygraph.dateParser,this.attrs_.axes.x.valueFormatter=Dygraph.dateString_,this.attrs_.axes.x.ticker=Dygraph.dateTicker,this.attrs_.axes.x.axisLabelFormatter=Dygraph.dateAxisFormatter):(this.attrs_.xValueParser=function(a){return parseFloat(a)},this.attrs_.axes.x.valueFormatter=function(a){return a},this.attrs_.axes.x.ticker=Dygraph.numericLinearTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter)},Dygraph.prototype.parseFloat_=function(a,b,c){var d=parseFloat(a);if(!isNaN(d))return d;if(/^ *$/.test(a))return null;if(/^ *nan *$/i.test(a))return NaN;var e="Unable to parse '"+a+"' as a number";return c!==null&&b!==null&&(e+=" on line "+(1+b)+" ('"+c+"') of CSV."),this.error(e),null},Dygraph.prototype.parseCSV_=function(a){var b=[],c=a.split("\n"),d,e,f=this.attr_("delimiter");c[0].indexOf(f)==-1&&c[0].indexOf("	")>=0&&(f="	");var g=0;"labels"in this.user_attrs_||(g=1,this.attrs_.labels=c[0].split(f));var h=0,i,j=!1,k=this.attr_("labels").length,l=!1;for(var m=g;m<c.length;m++){var n=c[m];h=m;if(n.length===0)continue;if(n[0]=="#")continue;var o=n.split(f);if(o.length<2)continue;var p=[];j||(this.detectTypeFromString_(o[0]),i=this.attr_("xValueParser"),j=!0),p[0]=i(o[0],this);if(this.fractions_)for(e=1;e<o.length;e++)d=o[e].split("/"),d.length!=2?(this.error('Expected fractional "num/den" values in CSV data but found a value \''+o[e]+"' on line "+(1+m)+" ('"+n+"') which is not of this form."),p[e]=[0,0]):p[e]=[this.parseFloat_(d[0],m,n),this.parseFloat_(d[1],m,n)];else if(this.attr_("errorBars")){o.length%2!=1&&this.error("Expected alternating (value, stdev.) pairs in CSV data but line "+(1+m)+" has an odd number of values ("+(o.length-1)+"): '"+n+"'");for(e=1;e<o.length;e+=2)p[(e+1)/2]=[this.parseFloat_(o[e],m,n),this.parseFloat_(o[e+1],m,n)]}else if(this.attr_("customBars"))for(e=1;e<o.length;e++){var q=o[e];/^ *$/.test(q)?p[e]=[null,null,null]:(d=q.split(";"),d.length==3?p[e]=[this.parseFloat_(d[0],m,n),this.parseFloat_(d[1],m,n),this.parseFloat_(d[2],m,n)]:this.warn('When using customBars, values must be either blank or "low;center;high" tuples (got "'+q+'" on line '+(1+m)))}else for(e=1;e<o.length;e++)p[e]=this.parseFloat_(o[e],m,n);b.length>0&&p[0]<b[b.length-1][0]&&(l=!0),p.length!=k&&this.error("Number of columns in line "+m+" ("+p.length+") does not agree with number of labels ("+k+") "+n);if(m===0&&this.attr_("labels")){var r=!0;for(e=0;r&&e<p.length;e++)p[e]&&(r=!1);if(r){this.warn("The dygraphs 'labels' option is set, but the first row of CSV data ('"+n+"') appears to also contain labels. "+"Will drop the CSV labels and use the option labels.");continue}}b.push(p)}return l&&(this.warn("CSV is out of order; order it correctly to speed loading."),b.sort(function(a,b){return a[0]-b[0]})),b},Dygraph.prototype.parseArray_=function(a){if(a.length===0)return this.error("Can't plot empty data set"),null;if(a[0].length===0)return this.error("Data set cannot contain an empty row"),null;var b;if(this.attr_("labels")===null){this.warn("Using default labels. Set labels explicitly via 'labels' in the options parameter"),this.attrs_.labels=["X"];for(b=1;b<a[0].length;b++)this.attrs_.labels.push("Y"+b)}if(Dygraph.isDateLike(a[0][0])){this.attrs_.axes.x.valueFormatter=Dygraph.dateString_,this.attrs_.axes.x.axisLabelFormatter=Dygraph.dateAxisFormatter,this.attrs_.axes.x.ticker=Dygraph.dateTicker;var c=Dygraph.clone(a);for(b=0;b<a.length;b++){if(c[b].length===0)return this.error("Row "+(1+b)+" of data is empty"),null;if(c[b][0]===null||typeof c[b][0].getTime!="function"||isNaN(c[b][0].getTime()))return this.error("x value in row "+(1+b)+" is not a Date"),null;c[b][0]=c[b][0].getTime()}return c}return this.attrs_.axes.x.valueFormatter=function(a){return a},this.attrs_.axes.x.axisLabelFormatter=Dygraph.numberAxisLabelFormatter,this.attrs_.axes.x.ticker=Dygraph.numericLinearTicks,a},Dygraph.prototype.parseDataTable_=function(a){var b=function(a){var b=String.fromCharCode(65+a%26);a=Math.floor(a/26);while(a>0)b=String.fromCharCode(65+(a-1)%26)+b.toLowerCase(),a=Math.floor((a-1)/26);return b},c=a.getNumberOfColumns(),d=a.getNumberOfRows(),e=a.getColumnType(0);if(e=="date"||e=="datetime")this.attrs_.xValueParser=Dygraph.dateParser,this.attrs_.axes.x.valueFormatter=Dygraph.dateString_,this.attrs_.axes.x.ticker=Dygraph.dateTicker,this.attrs_.axes.x.axisLabelFormatter=Dygraph.dateAxisFormatter;else{if(e!="number")return this.error("only 'date', 'datetime' and 'number' types are supported for column 1 of DataTable input (Got '"+e+"')"),null;this.attrs_.xValueParser=function(a){return parseFloat(a)},this.attrs_.axes.x.valueFormatter=function(a){return a},this.attrs_.axes.x.ticker=Dygraph.numericLinearTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter}var f=[],g={},h=!1,i,j;for(i=1;i<c;i++){var k=a.getColumnType(i);if(k=="number")f.push(i);else if(k=="string"&&this.attr_("displayAnnotations")){var l=f[f.length-1];g.hasOwnProperty(l)?g[l].push(i):g[l]=[i],h=!0}else this.error("Only 'number' is supported as a dependent type with Gviz. 'string' is only supported if displayAnnotations is true")}var m=[a.getColumnLabel(0)];for(i=0;i<f.length;i++)m.push(a.getColumnLabel(f[i])),this.attr_("errorBars")&&(i+=1);this.attrs_.labels=m,c=m.length;var n=[],o=!1,p=[];for(i=0;i<d;i++){var q=[];if(typeof a.getValue(i,0)=="undefined"||a.getValue(i,0)===null){this.warn("Ignoring row "+i+" of DataTable because of undefined or null first column.");continue}e=="date"||e=="datetime"?q.push(a.getValue(i,0).getTime()):q.push(a.getValue(i,0));if(!this.attr_("errorBars")){for(j=0;j<f.length;j++){var r=f[j];q.push(a.getValue(i,r));if(h&&g.hasOwnProperty(r)&&a.getValue(i,g[r][0])!==null){var s={};s.series=a.getColumnLabel
(r),s.xval=q[0],s.shortText=b(p.length),s.text="";for(var t=0;t<g[r].length;t++)t&&(s.text+="\n"),s.text+=a.getValue(i,g[r][t]);p.push(s)}}for(j=0;j<q.length;j++)isFinite(q[j])||(q[j]=null)}else for(j=0;j<c-1;j++)q.push([a.getValue(i,1+2*j),a.getValue(i,2+2*j)]);n.length>0&&q[0]<n[n.length-1][0]&&(o=!0),n.push(q)}o&&(this.warn("DataTable is out of order; order it correctly to speed loading."),n.sort(function(a,b){return a[0]-b[0]})),this.rawData_=n,p.length>0&&this.setAnnotations(p,!0)},Dygraph.prototype.start_=function(){var a=this.file_;typeof a=="function"&&(a=a());if(Dygraph.isArrayLike(a))this.rawData_=this.parseArray_(a),this.predraw_();else if(typeof a=="object"&&typeof a.getColumnRange=="function")this.parseDataTable_(a),this.predraw_();else if(typeof a=="string")if(a.indexOf("\n")>=0)this.loadedEvent_(a);else{var b=new XMLHttpRequest,c=this;b.onreadystatechange=function(){b.readyState==4&&(b.status===200||b.status===0)&&c.loadedEvent_(b.responseText)},b.open("GET",a,!0),b.send(null)}else this.error("Unknown data format: "+typeof a)},Dygraph.prototype.updateOptions=function(a,b){typeof b=="undefined"&&(b=!1);var c=a.file,d=Dygraph.mapLegacyOptions_(a);"rollPeriod"in d&&(this.rollPeriod_=d.rollPeriod),"dateWindow"in d&&(this.dateWindow_=d.dateWindow,"isZoomedIgnoreProgrammaticZoom"in d||(this.zoomed_x_=d.dateWindow!==null)),"valueRange"in d&&!("isZoomedIgnoreProgrammaticZoom"in d)&&(this.zoomed_y_=d.valueRange!==null);var e=Dygraph.isPixelChangingOptionList(this.attr_("labels"),d);Dygraph.updateDeep(this.user_attrs_,d),c?(this.file_=c,b||this.start_()):b||(e?this.predraw_():this.renderGraph_(!1,!1))},Dygraph.mapLegacyOptions_=function(a){var b={};for(var c in a){if(c=="file")continue;a.hasOwnProperty(c)&&(b[c]=a[c])}var d=function(a,c,d){b.axes||(b.axes={}),b.axes[a]||(b.axes[a]={}),b.axes[a][c]=d},e=function(c,e,f){typeof a[c]!="undefined"&&(d(e,f,a[c]),delete b[c])};return e("xValueFormatter","x","valueFormatter"),e("pixelsPerXLabel","x","pixelsPerLabel"),e("xAxisLabelFormatter","x","axisLabelFormatter"),e("xTicker","x","ticker"),e("yValueFormatter","y","valueFormatter"),e("pixelsPerYLabel","y","pixelsPerLabel"),e("yAxisLabelFormatter","y","axisLabelFormatter"),e("yTicker","y","ticker"),b},Dygraph.prototype.resize=function(a,b){if(this.resize_lock)return;this.resize_lock=!0,a===null!=(b===null)&&(this.warn("Dygraph.resize() should be called with zero parameters or two non-NULL parameters. Pretending it was zero."),a=b=null);var c=this.width_,d=this.height_;a?(this.maindiv_.style.width=a+"px",this.maindiv_.style.height=b+"px",this.width_=a,this.height_=b):(this.width_=this.maindiv_.clientWidth,this.height_=this.maindiv_.clientHeight);if(c!=this.width_||d!=this.height_)this.maindiv_.innerHTML="",this.roller_=null,this.attrs_.labelsDiv=null,this.createInterface_(),this.annotations_.length&&this.layout_.setAnnotations(this.annotations_),this.predraw_();this.resize_lock=!1},Dygraph.prototype.adjustRoll=function(a){this.rollPeriod_=a,this.predraw_()},Dygraph.prototype.visibility=function(){this.attr_("visibility")||(this.attrs_.visibility=[]);while(this.attr_("visibility").length<this.numColumns()-1)this.attrs_.visibility.push(!0);return this.attr_("visibility")},Dygraph.prototype.setVisibility=function(a,b){var c=this.visibility();a<0||a>=c.length?this.warn("invalid series number in setVisibility: "+a):(c[a]=b,this.predraw_())},Dygraph.prototype.size=function(){return{width:this.width_,height:this.height_}},Dygraph.prototype.setAnnotations=function(a,b){Dygraph.addAnnotationRule(),this.annotations_=a,this.layout_.setAnnotations(this.annotations_),b||this.predraw_()},Dygraph.prototype.annotations=function(){return this.annotations_},Dygraph.prototype.getLabels=function(a){return this.attr_("labels").slice()},Dygraph.prototype.indexFromSetName=function(a){return this.setIndexByName_[a]},Dygraph.prototype.datasetIndexFromSetName_=function(a){return this.datasetIndex_[this.indexFromSetName(a)]},Dygraph.addAnnotationRule=function(){if(Dygraph.addedAnnotationCSS)return;var a="border: 1px solid black; background-color: white; text-align: center;",b=document.createElement("style");b.type="text/css",document.getElementsByTagName("head")[0].appendChild(b);for(var c=0;c<document.styleSheets.length;c++){if(document.styleSheets[c].disabled)continue;var d=document.styleSheets[c];try{if(d.insertRule){var e=d.cssRules?d.cssRules.length:0;d.insertRule(".dygraphDefaultAnnotation { "+a+" }",e)}else d.addRule&&d.addRule(".dygraphDefaultAnnotation",a);Dygraph.addedAnnotationCSS=!0;return}catch(f){}}this.warn("Unable to add default annotation CSS rule; display may be off.")};var DateGraph=Dygraph;"use strict",Dygraph.LOG_SCALE=10,Dygraph.LN_TEN=Math.log(Dygraph.LOG_SCALE),Dygraph.log10=function(a){return Math.log(a)/Dygraph.LN_TEN},Dygraph.DEBUG=1,Dygraph.INFO=2,Dygraph.WARNING=3,Dygraph.ERROR=3,Dygraph.LOG_STACK_TRACES=!1,Dygraph.DOTTED_LINE=[2,2],Dygraph.DASHED_LINE=[7,3],Dygraph.DOT_DASH_LINE=[7,2,2,2],Dygraph.log=function(a,b){var c;if(typeof printStackTrace!="undefined"){c=printStackTrace({guess:!1});while(c[0].indexOf("stacktrace")!=-1)c.splice(0,1);c.splice(0,2);for(var d=0;d<c.length;d++)c[d]=c[d].replace(/\([^)]*\/(.*)\)/,"@$1").replace(/\@.*\/([^\/]*)/,"@$1").replace("[object Object].","");var e=c.splice(0,1)[0];b+=" ("+e.replace(/^.*@ ?/,"")+")"}if(typeof console!="undefined")switch(a){case Dygraph.DEBUG:console.debug("dygraphs: "+b);break;case Dygraph.INFO:console.info("dygraphs: "+b);break;case Dygraph.WARNING:console.warn("dygraphs: "+b);break;case Dygraph.ERROR:console.error("dygraphs: "+b)}Dygraph.LOG_STACK_TRACES&&console.log(c.join("\n"))},Dygraph.info=function(a){Dygraph.log(Dygraph.INFO,a)},Dygraph.prototype.info=Dygraph.info,Dygraph.warn=function(a){Dygraph.log(Dygraph.WARNING,a)},Dygraph.prototype.warn=Dygraph.warn,Dygraph.error=function(a){Dygraph.log(Dygraph.ERROR,a)},Dygraph.prototype.error=Dygraph.error,Dygraph.getContext=function(a){return a.getContext("2d")},Dygraph.addEvent=function(b,c,d){b.addEventListener?b.addEventListener(c,d,!1):(b[c+d]=function(){d(window.event)},b.attachEvent("on"+c,b[c+d]))},Dygraph.removeEvent=function(b,c,d){b.removeEventListener?b.removeEventListener(c,d,!1):(b.detachEvent("on"+c,b[c+d]),b[c+d]=null)},Dygraph.cancelEvent=function(a){return a=a?a:window.event,a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.cancel=!0,a.returnValue=!1,!1},Dygraph.hsvToRGB=function(a,b,c){var d,e,f;if(b===0)d=c,e=c,f=c;else{var g=Math.floor(a*6),h=a*6-g,i=c*(1-b),j=c*(1-b*h),k=c*(1-b*(1-h));switch(g){case 1:d=j,e=c,f=i;break;case 2:d=i,e=c,f=k;break;case 3:d=i,e=j,f=c;break;case 4:d=k,e=i,f=c;break;case 5:d=c,e=i,f=j;break;case 6:case 0:d=c,e=k,f=i}}return d=Math.floor(255*d+.5),e=Math.floor(255*e+.5),f=Math.floor(255*f+.5),"rgb("+d+","+e+","+f+")"},Dygraph.findPosX=function(a){var b=0;if(a.offsetParent){var c=a;for(;;){b+=c.offsetLeft;if(!c.offsetParent)break;c=c.offsetParent}}else a.x&&(b+=a.x);while(a&&a!=document.body)b-=a.scrollLeft,a=a.parentNode;return b},Dygraph.findPosY=function(a){var b=0;if(a.offsetParent){var c=a;for(;;){b+=c.offsetTop;if(!c.offsetParent)break;c=c.offsetParent}}else a.y&&(b+=a.y);while(a&&a!=document.body)b-=a.scrollTop,a=a.parentNode;return b},Dygraph.pageX=function(a){if(a.pageX)return!a.pageX||a.pageX<0?0:a.pageX;var b=document,c=document.body;return a.clientX+(b.scrollLeft||c.scrollLeft)-(b.clientLeft||0)},Dygraph.pageY=function(a){if(a.pageY)return!a.pageY||a.pageY<0?0:a.pageY;var b=document,c=document.body;return a.clientY+(b.scrollTop||c.scrollTop)-(b.clientTop||0)},Dygraph.isOK=function(a){return a&&!isNaN(a)},Dygraph.isValidPoint=function(a,b){return a?a.yval===null?!1:a.x===null||a.x===undefined?!1:a.y===null||a.y===undefined?!1:isNaN(a.x)||!b&&isNaN(a.y)?!1:!0:!1},Dygraph.floatFormat=function(a,b){var c=Math.min(Math.max(1,b||2),21);return Math.abs(a)<.001&&a!==0?a.toExponential(c-1):a.toPrecision(c)},Dygraph.zeropad=function(a){return a<10?"0"+a:""+a},Dygraph.hmsString_=function(a){var b=Dygraph.zeropad,c=new Date(a);return c.getSeconds()?b(c.getHours())+":"+b(c.getMinutes())+":"+b(c.getSeconds()):b(c.getHours())+":"+b(c.getMinutes())},Dygraph.round_=function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},Dygraph.binarySearch=function(a,b,c,d,e){if(d===null||d===undefined||e===null||e===undefined)d=0,e=b.length-1;if(d>e)return-1;if(c===null||c===undefined)c=0;var f=function(a){return a>=0&&a<b.length},g=parseInt((d+e)/2,10),h=b[g];if(h==a)return g;var i;if(h>a){if(c>0){i=g-1;if(f(i)&&b[i]<a)return g}return Dygraph.binarySearch(a,b,c,d,g-1)}if(h<a){if(c<0){i=g+1;if(f(i)&&b[i]>a)return g}return Dygraph.binarySearch(a,b,c,g+1,e)}},Dygraph.dateParser=function(a){var b,c;if(a.search("-")==-1||a.search("T")!=-1||a.search("Z")!=-1){c=Dygraph.dateStrToMillis(a);if(c&&!isNaN(c))return c}if(a.search("-")!=-1){b=a.replace("-","/","g");while(b.search("-")!=-1)b=b.replace("-","/");c=Dygraph.dateStrToMillis(b)}else a.length==8?(b=a.substr(0,4)+"/"+a.substr(4,2)+"/"+a.substr(6,2),c=Dygraph.dateStrToMillis(b)):c=Dygraph.dateStrToMillis(a);return(!c||isNaN(c))&&Dygraph.error("Couldn't parse "+a+" as a date"),c},Dygraph.dateStrToMillis=function(a){return(new Date(a)).getTime()},Dygraph.update=function(a,b){if(typeof b!="undefined"&&b!==null)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},Dygraph.updateDeep=function(a,b){function c(a){return typeof Node=="object"?a instanceof Node:typeof a=="object"&&typeof a.nodeType=="number"&&typeof a.nodeName=="string"}if(typeof b!="undefined"&&b!==null)for(var d in b)b.hasOwnProperty(d)&&(b[d]===null?a[d]=null:Dygraph.isArrayLike(b[d])?a[d]=b[d].slice():c(b[d])?a[d]=b[d]:typeof b[d]=="object"?(typeof a[d]!="object"&&(a[d]={}),Dygraph.updateDeep(a[d],b[d])):a[d]=b[d]);return a},Dygraph.isArrayLike=function(a){var b=typeof a;return b!="object"&&(b!="function"||typeof a.item!="function")||a===null||typeof a.length!="number"||a.nodeType===3?!1:!0},Dygraph.isDateLike=function(a){return typeof a!="object"||a===null||typeof a.getTime!="function"?!1:!0},Dygraph.clone=function(a){var b=[];for(var c=0;c<a.length;c++)Dygraph.isArrayLike(a[c])?b.push(Dygraph.clone(a[c])):b.push(a[c]);return b},Dygraph.createCanvas=function(){var a=document.createElement("canvas"),b=/MSIE/.test(navigator.userAgent)&&!window.opera;return b&&typeof G_vmlCanvasManager!="undefined"&&(a=G_vmlCanvasManager.initElement(a)),a},Dygraph.isAndroid=function(){return/Android/.test(navigator.userAgent)},Dygraph.repeatAndCleanup=function(a,b,c,d){var e=0,f=(new Date).getTime();a(e);if(b==1){d();return}(function g(){if(e>=b)return;var h=f+(1+e)*c;setTimeout(function(){e++,a(e),e>=b-1?d():g()},h-(new Date).getTime())})()},Dygraph.isPixelChangingOptionList=function(a,b){var c={annotationClickHandler:!0,annotationDblClickHandler:!0,annotationMouseOutHandler:!0,annotationMouseOverHandler:!0,axisLabelColor:!0,axisLineColor:!0,axisLineWidth:!0,clickCallback:!0,digitsAfterDecimal:!0,drawCallback:!0,drawHighlightPointCallback:!0,drawPoints:!0,drawPointCallback:!0,drawXGrid:!0,drawYGrid:!0,fillAlpha:!0,gridLineColor:!0,gridLineWidth:!0,hideOverlayOnMouseOut:!0,highlightCallback:!0,highlightCircleSize:!0,interactionModel:!0,isZoomedIgnoreProgrammaticZoom:!0,labelsDiv:!0,labelsDivStyles:!0,labelsDivWidth:!0,labelsKMB:!0,labelsKMG2:!0,labelsSeparateLines:!0,labelsShowZeroValues:!0,legend:!0,maxNumberWidth:!0,panEdgeFraction:!0,pixelsPerYLabel:!0,pointClickCallback:!0,pointSize:!0,rangeSelectorPlotFillColor:!0,rangeSelectorPlotStrokeColor:!0,showLabelsOnHighlight:!0,showRoller:!0,sigFigs:!0,strokeWidth:!0,underlayCallback:!0,unhighlightCallback:!0,xAxisLabelFormatter:!0,xTicker:!0,xValueFormatter:!0,yAxisLabelFormatter:!0,yValueFormatter:!0,zoomCallback:!0},d=!1,e={};if(a)for(var f=1;f<a.length;f++)e[a[f]]=!0;for(var g in b){if(d)break;if(b.hasOwnProperty(g))if(e[g])for(var h in b[g]){if(d)break;b[g].hasOwnProperty(h)&&!c[h]&&(d=!0)}else c[g]||(d=!0)}return d},Dygraph.compareArrays=function(a,b){if(!Dygraph.isArrayLike(a)||!Dygraph.isArrayLike(b))return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},Dygraph.regularShape_=function(a,b,c,d,e,f,g){f=f?f:0,g=g?g:Math.PI*2/b,a.beginPath();var h=!0,i=f,j=i,k=function(){var a=d+Math.sin(j)*c,b=e+ -Math.cos(j)*c;return[a,b]},l=k(),m=l[0],n=l[1];a.moveTo(m,n);for(var o=0;o<b;o++){j=o==b-1?i:j+g;var p=k();a.lineTo(p[0],p[1])}a.fill(),a.stroke()},Dygraph.shapeFunction_=function(a,b,c){return function(d,e,f,g,h,i,j){f.strokeStyle=i,f.fillStyle="white",Dygraph.regularShape_(f,a,j,g,h,b,c)}},Dygraph.DrawPolygon_=function(a,b,c,d,e,f,g,h){(new Dygraph.RegularShape_(a,b,h)).draw(c,d,e,g)},Dygraph.Circles={DEFAULT:function(a,b,c,d,e,f,g){c.beginPath(),c.fillStyle=f,c.arc(d,e,g,0,2*Math.PI,!1),c.fill()},TRIANGLE:Dygraph.shapeFunction_(3),SQUARE:Dygraph.shapeFunction_(4,Math.PI/4),DIAMOND:Dygraph.shapeFunction_(4),PENTAGON:Dygraph.shapeFunction_(5),HEXAGON:Dygraph.shapeFunction_(6),CIRCLE:function(a,b,c,d,e,f,g){c.beginPath(),c.strokeStyle=f,c.fillStyle="white",c.arc(d,e,g,0,2*Math.PI,!1),c.fill(),c.stroke()},STAR:Dygraph.shapeFunction_(5,0,4*Math.PI/5),PLUS:function(a,b,c,d,e,f,g){c.strokeStyle=f,c.beginPath(),c.moveTo(d+g,e),c.lineTo(d-g,e),c.closePath(),c.stroke(),c.beginPath(),c.moveTo(d,e+g),c.lineTo(d,e-g),c.closePath(),c.stroke()},EX:function(a,b,c,d,e,f,g){c.strokeStyle=f,c.beginPath(),c.moveTo(d+g,e+g),c.lineTo(d-g,e-g),c.closePath(),c.stroke(),c.beginPath(),c.moveTo(d+g,e-g),c.lineTo(d-g,e+g),c.closePath(),c.stroke()}},"use strict",Dygraph.GVizChart=function(a){this.container=a},Dygraph.GVizChart.prototype.draw=function(a,b){this.container.innerHTML="",typeof this.date_graph!="undefined"&&this.date_graph.destroy(),this.date_graph=new Dygraph(this.container,a,b)},Dygraph.GVizChart.prototype.setSelection=function(a){var b=!1;a.length&&(b=a[0].row),this.date_graph.setSelection(b)},Dygraph.GVizChart.prototype.getSelection=function(){var a=[],b=this.date_graph.getSelection();if(b<0)return a;var c=this.date_graph.layout_.datasets;for(var d=0;d<c.length;++d)a.push({row:b,column:d+1});return a},"use strict",Dygraph.Interaction={},Dygraph.Interaction.startPan=function(a,b,c){var d,e;c.isPanning=!0;var f=b.xAxisRange();c.dateRange=f[1]-f[0],c.initialLeftmostDate=f[0],c.xUnitsPerPixel=c.dateRange/(b.plotter_.area.w-1);if(b.attr_("panEdgeFraction")){var g=b.width_*b.attr_("panEdgeFraction"),h=b.xAxisExtremes(),i=b.toDomXCoord(h[0])-g,j=b.toDomXCoord(h[1])+g,k=b.toDataXCoord(i),l=b.toDataXCoord(j);c.boundedDates=[k,l];var m=[],n=b.height_*b.attr_("panEdgeFraction");for(d=0;d<b.axes_.length;d++){e=b.axes_[d];var o=e.extremeRange,p=b.toDomYCoord(o[0],d)+n,q=b.toDomYCoord(o[1],d)-n,r=b.toDataYCoord(p),s=b.toDataYCoord(q);m[d]=[r,s]}c.boundedValues=m}c.is2DPan=!1,c.axes=[];for(d=0;d<b.axes_.length;d++){e=b.axes_[d];var t={},u=b.yAxisRange(d);e.logscale?(t.initialTopValue=Dygraph.log10(u[1]),t.dragValueRange=Dygraph.log10(u[1])-Dygraph.log10(u[0])):(t.initialTopValue=u[1],t.dragValueRange=u[1]-u[0]),t.unitsPerPixel=t.dragValueRange/(b.plotter_.area.h-1),c.axes.push(t);if(e.valueWindow||e.valueRange)c.is2DPan=!0}},Dygraph.Interaction.movePan=function(a,b,c){c.dragEndX=b.dragGetX_(a,c),c.dragEndY=b.dragGetY_(a,c);var d=c.initialLeftmostDate-(c.dragEndX-c.dragStartX)*c.xUnitsPerPixel;c.boundedDates&&(d=Math.max(d,c.boundedDates[0]));var e=d+c.dateRange;c.boundedDates&&e>c.boundedDates[1]&&(d-=e-c.boundedDates[1],e=d+c.dateRange),b.dateWindow_=[d,e];if(c.is2DPan)for(var f=0;f<b.axes_.length;f++){var g=b.axes_[f],h=c.axes[f],i=c.dragEndY-c.dragStartY,j=i*h.unitsPerPixel,k=c.boundedValues?c.boundedValues[f]:null,l=h.initialTopValue+j;k&&(l=Math.min(l,k[1]));var m=l-h.dragValueRange;k&&m<k[0]&&(l-=m-k[0],m=l-h.dragValueRange),g.logscale?g.valueWindow=[Math.pow(Dygraph.LOG_SCALE,m),Math.pow(Dygraph.LOG_SCALE,l)]:g.valueWindow=[m,l]}b.drawGraph_(!1)},Dygraph.Interaction.endPan=function(a,b,c){c.dragEndX=b.dragGetX_(a,c),c.dragEndY=b.dragGetY_(a,c);var d=Math.abs(c.dragEndX-c.dragStartX),e=Math.abs(c.dragEndY-c.dragStartY);d<2&&e<2&&b.lastx_!==undefined&&b.lastx_!=-1&&Dygraph.Interaction.treatMouseOpAsClick(b,a,c),c.isPanning=!1,c.is2DPan=!1,c.initialLeftmostDate=null,c.dateRange=null,c.valueRange=null,c.boundedDates=null,c.boundedValues=null,c.axes=null},Dygraph.Interaction.startZoom=function(a,b,c){c.isZooming=!0},Dygraph.Interaction.moveZoom=function(a,b,c){c.dragEndX=b.dragGetX_(a,c),c.dragEndY=b.dragGetY_(a,c);var d=Math.abs(c.dragStartX-c.dragEndX),e=Math.abs(c.dragStartY-c.dragEndY);c.dragDirection=d<e/2?Dygraph.VERTICAL:Dygraph.HORIZONTAL,b.drawZoomRect_(c.dragDirection,c.dragStartX,c.dragEndX,c.dragStartY,c.dragEndY,c.prevDragDirection,c.prevEndX,c.prevEndY),c.prevEndX=c.dragEndX,c.prevEndY=c.dragEndY,c.prevDragDirection=c.dragDirection},Dygraph.Interaction.treatMouseOpAsClick=function(a,b,c){var d=a.attr_("clickCallback"),e=a.attr_("pointClickCallback"),f=null;if(e){var g=-1,h=Number.MAX_VALUE;for(var i=0;i<a.selPoints_.length;i++){var j=a.selPoints_[i],k=Math.pow(j.canvasx-c.dragEndX,2)+Math.pow(j.canvasy-c.dragEndY,2);!isNaN(k)&&(g==-1||k<h)&&(h=k,g=i)}var l=a.attr_("highlightCircleSize")+2;h<=l*l&&(f=a.selPoints_[g])}f&&e(b,f),d&&d(b,a.lastx_,a.selPoints_)},Dygraph.Interaction.endZoom=function(a,b,c){c.isZooming=!1,c.dragEndX=b.dragGetX_(a,c),c.dragEndY=b.dragGetY_(a,c);var d=Math.abs(c.dragEndX-c.dragStartX),e=Math.abs(c.dragEndY-c.dragStartY);d<2&&e<2&&b.lastx_!==undefined&&b.lastx_!=-1&&Dygraph.Interaction.treatMouseOpAsClick(b,a,c),d>=10&&c.dragDirection==Dygraph.HORIZONTAL?(b.doZoomX_(Math.min(c.dragStartX,c.dragEndX),Math.max(c.dragStartX,c.dragEndX)),c.cancelNextDblclick=!0):e>=10&&c.dragDirection==Dygraph.VERTICAL?(b.doZoomY_(Math.min(c.dragStartY,c.dragEndY),Math.max(c.dragStartY,c.dragEndY)),c.cancelNextDblclick=!0):b.clearZoomRect_(),c.dragStartX=null,c.dragStartY=null},Dygraph.Interaction.startTouch=function(a,b,c){a.preventDefault();var d=[];for(var e=0;e<a.touches.length;e++){var f=a.touches[e];d.push({pageX:f.pageX,pageY:f.pageY,dataX:b.toDataXCoord(f.pageX),dataY:b.toDataYCoord(f.pageY)})}c.initialTouches=d;if(d.length==1)c.initialPinchCenter=d[0],c.touchDirections={x:!0,y:!0};else if(d.length==2){c.initialPinchCenter={pageX:.5*(d[0].pageX+d[1].pageX),pageY:.5*(d[0].pageY+d[1].pageY),dataX:.5*(d[0].dataX+d[1].dataX),dataY:.5*(d[0].dataY+d[1].dataY)};var g=180/Math.PI*Math.atan2(c.initialPinchCenter.pageY-d[0].pageY,d[0].pageX-c.initialPinchCenter.pageX);g=Math.abs(g),g>90&&(g=90-g),c.touchDirections={x:g<67.5,y:g>22.5}}c.initialRange={x:b.xAxisRange(),y:b.yAxisRange()}},Dygraph.Interaction.moveTouch=function(a,b,c){var d,e=[];for(d=0;d<a.touches.length;d++){var f=a.touches[d];e.push({pageX:f.pageX,pageY:f.pageY})}var g=c.initialTouches,h,i=c.initialPinchCenter;e.length==1?h=e[0]:h={pageX:.5*(e[0].pageX+e[1].pageX),pageY:.5*(e[0].pageY+e[1].pageY)};var j={pageX:h.pageX-i.pageX,pageY:h.pageY-i.pageY},k=c.initialRange.x[1]-c.initialRange.x[0],l=c.initialRange.y[0]-c.initialRange.y[1];j.dataX=j.pageX/b.plotter_.area.w*k,j.dataY=j.pageY/b.plotter_.area.h*l;var m,n;if(e.length==1)m=1,n=1;else if(e.length==2){var o=g[1].pageX-i.pageX;m=(e[1].pageX-h.pageX)/o;var p=g[1].pageY-i.pageY;n=(e[1].pageY-h.pageY)/p}m=Math.min(8,Math.max(.125,m)),n=Math.min(8,Math.max(.125,n)),c.touchDirections.x&&(b.dateWindow_=[i.dataX-j.dataX+(c.initialRange.x[0]-i.dataX)/m,i.dataX-j.dataX+(c.initialRange.x[1]-i.dataX)/m]);if(c.touchDirections.y)for(d=0;d<1;d++){var q=b.axes_[d];q.logscale||(q.valueWindow=[i.dataY-j.dataY+(c.initialRange.y[0]-i.dataY)/n,i.dataY-j.dataY+(c.initialRange.y[1]-i.dataY)/n])}b.drawGraph_(!1)},Dygraph.Interaction.endTouch=function(a,b,c){a.touches.length!=0&&Dygraph.Interaction.startTouch(a,b,c)},Dygraph.Interaction.defaultModel={mousedown:function(a,b,c){if(a.button&&a.button==2)return;c.initializeMouseDown(a,b,c),a.altKey||a.shiftKey?Dygraph.startPan(a,b,c):Dygraph.startZoom(a,b,c)},mousemove:function(a,b,c){c.isZooming?Dygraph.moveZoom(a,b,c):c.isPanning&&Dygraph.movePan(a,b,c)},mouseup:function(a,b,c){c.isZooming?Dygraph.endZoom(a,b,c):c.isPanning&&Dygraph.endPan(a,b,c)},touchstart:function(a,b,c){Dygraph.Interaction.startTouch(a,b,c)},touchmove:function(a,b,c){Dygraph.Interaction.moveTouch(a,b,c)},touchend:function(a,b,c){Dygraph.Interaction.endTouch(a,b,c)},mouseout:function(a,b,c){c.isZooming&&(c.dragEndX=null,c.dragEndY=null)},dblclick:function(a,b,c){if(c.cancelNextDblclick){c.cancelNextDblclick=!1;return}if(a.altKey||a.shiftKey)return;b.doUnzoom_()}},Dygraph.DEFAULT_ATTRS.interactionModel=Dygraph.Interaction.defaultModel,Dygraph.defaultInteractionModel=Dygraph.Interaction.defaultModel,Dygraph.endZoom=Dygraph.Interaction.endZoom,Dygraph.moveZoom=Dygraph.Interaction.moveZoom,Dygraph.startZoom=Dygraph.Interaction.startZoom,Dygraph.endPan=Dygraph.Interaction.endPan,Dygraph.movePan=Dygraph.Interaction.movePan,Dygraph.startPan=Dygraph.Interaction.startPan,Dygraph.Interaction.nonInteractiveModel_={mousedown:function(a,b,c){c.initializeMouseDown(a,b,c)},mouseup:function(a,b,c){c.dragEndX=b.dragGetX_(a,c),c.dragEndY=b.dragGetY_(a,c);var d=Math.abs(c.dragEndX-c.dragStartX),e=Math.abs(c.dragEndY-c.dragStartY);d<2&&e<2&&b.lastx_!==undefined&&b.lastx_!=-1&&Dygraph.Interaction.treatMouseOpAsClick(b,a,c)}},Dygraph.Interaction.dragIsPanInteractionModel={mousedown:function(a,b,c){c.initializeMouseDown(a,b,c),Dygraph.startPan(a,b,c)},mousemove:function(a,b,c){c.isPanning&&Dygraph.movePan(a,b,c)},mouseup:function(a,b,c){c.isPanning&&Dygraph.endPan(a,b,c)}},"use strict";var DygraphRangeSelector=function(a){this.isIE_=/MSIE/.test(navigator.userAgent)&&!window.opera,this.isUsingExcanvas_=a.isUsingExcanvas_,this.dygraph_=a,this.createCanvases_(),this.isUsingExcanvas_&&this.createIEPanOverlay_(),this.createZoomHandles_(),this.initInteraction_()};DygraphRangeSelector.prototype.addToGraph=function(a,b){this.layout_=b,this.resize_(),a.appendChild(this.bgcanvas_),a.appendChild(this.fgcanvas_),a.appendChild(this.leftZoomHandle_),a.appendChild(this.rightZoomHandle_)},DygraphRangeSelector.prototype.renderStaticLayer=function(){this.resize_(),this.drawStaticLayer_()},DygraphRangeSelector.prototype.renderInteractiveLayer=function(){if(this.isChangingRange_)return;this.placeZoomHandles_(),this.drawInteractiveLayer_()},DygraphRangeSelector.prototype.resize_=function(){function a(a,b){a.style.top=b.y+"px",a.style.left=b.x+"px",a.width=b.w,a.height=b.h,a.style.width=a.width+"px",a.style.height=a.height+"px"}var b=this.layout_.getPlotArea(),c=this.attr_("axisLabelFontSize")+2*this.attr_("axisTickSize");this.canvasRect_={x:b.x,y:b.y+b.h+c+4,w:b.w,h:this.attr_("rangeSelectorHeight")},a(this.bgcanvas_,this.canvasRect_),a(this.fgcanvas_,this.canvasRect_)},DygraphRangeSelector.prototype.attr_=function(a){return this.dygraph_.attr_(a)},DygraphRangeSelector.prototype.createCanvases_=function(){this.bgcanvas_=Dygraph.createCanvas(),this.bgcanvas_.className="dygraph-rangesel-bgcanvas",this.bgcanvas_.style.position="absolute",this.bgcanvas_.style.zIndex=9,this.bgcanvas_ctx_=Dygraph.getContext(this.bgcanvas_),this.fgcanvas_=Dygraph.createCanvas(),this.fgcanvas_.className="dygraph-rangesel-fgcanvas",this.fgcanvas_.style.position="absolute",this.fgcanvas_.style.zIndex=9,this.fgcanvas_.style.cursor="default",this.fgcanvas_ctx_=Dygraph.getContext(this.fgcanvas_)},DygraphRangeSelector.prototype.createIEPanOverlay_=function(){this.iePanOverlay_=document.createElement("div"),this.iePanOverlay_.style.position="absolute",this.iePanOverlay_.style.backgroundColor="white",this.iePanOverlay_.style.filter="alpha(opacity=0)",this.iePanOverlay_.style.display="none",this.iePanOverlay_.style.cursor="move",this.fgcanvas_.appendChild(this.iePanOverlay_)},DygraphRangeSelector.prototype.createZoomHandles_=function(){var a=new Image;a.className="dygraph-rangesel-zoomhandle",a.style.position="absolute",a.style.zIndex=10,a.style.visibility="hidden",a.style.cursor="col-resize",/MSIE 7/.test(navigator.userAgent)?(a.width=7,a.height=14,a.style.backgroundColor="white",a.style.border="1px solid #333333"):(a.width=9,a.height=16,a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII="),this.leftZoomHandle_=a,this.rightZoomHandle_=a.cloneNode(!1)},DygraphRangeSelector.prototype.initInteraction_=function(){var a=this,b=this.isIE_?document:window,c=0,d=null,e=!1,f=!1,g,h,i,j,k,l,m,n,o,p,q;g=function(b){var c=a.dygraph_.xAxisExtremes(),d=(c[1]-c[0])/a.canvasRect_.w,e=c[0]+(b.leftHandlePos-a.canvasRect_.x)*d,f=c[0]+(b.rightHandlePos-a.canvasRect_.x)*d;return[e,f]},h=function(f){Dygraph.cancelEvent(f),e=!0,c=f.screenX,d=f.target?f.target:f.srcElement,Dygraph.addEvent(b,"mousemove",i),Dygraph.addEvent(b,"mouseup",j),a.fgcanvas_.style.cursor="col-resize"},i=function(b){if(!e)return;var f=b.screenX-c;if(Math.abs(f)<4)return;c=b.screenX;var g=a.getZoomHandleStatus_(),h;d==a.leftZoomHandle_?(h=g.leftHandlePos+f,h=Math.min(h,g.rightHandlePos-d.width-3),h=Math.max(h,a.canvasRect_.x)):(h=g.rightHandlePos+f,h=Math.min(h,a.canvasRect_.x+a.canvasRect_.w),h=Math.max(h,g.leftHandlePos+d.width+3));var i=d.width/2;d.style.left=h-i+"px",a.drawInteractiveLayer_(),a.isUsingExcanvas_||k()},j=function(c){if(!e)return;e=!1,Dygraph.removeEvent(b,"mousemove",i),Dygraph.removeEvent(b,"mouseup",j),a.fgcanvas_.style.cursor="default",a.isUsingExcanvas_&&k()},k=function(){try{var b=a.getZoomHandleStatus_();a.isChangingRange_=!0;if(!b.isZoomed)a.dygraph_.doUnzoom_();else{var c=g(b);a.dygraph_.doZoomXDates_(c[0],c[1])}}finally{a.isChangingRange_=!1}},l=function(b){if(a.isUsingExcanvas_)return b.srcElement==a.iePanOverlay_;var c;b.offsetX!=undefined?c=a.canvasRect_.x+b.offsetX:c=b.clientX;var d=a.getZoomHandleStatus_();return c>d.leftHandlePos&&c<d.rightHandlePos},m=function(d){!f&&l(d)&&a.getZoomHandleStatus_().isZoomed&&(Dygraph.cancelEvent(d),f=!0,c=d.screenX,Dygraph.addEvent(b,"mousemove",n),Dygraph.addEvent(b,"mouseup",o))},n=function(b){if(!f)return;Dygraph.cancelEvent(b);var d=b.screenX-c;if(Math.abs(d)<4)return;c=b.screenX;var e=a.getZoomHandleStatus_(),g=e.leftHandlePos,h=e.rightHandlePos,i=h-g;g+d<=a.canvasRect_.x?(g=a.canvasRect_.x,h=g+i):h+d>=a.canvasRect_.x+a.canvasRect_.w?(h=a.canvasRect_.x+a.canvasRect_.w,g=h-i):(g+=d,h+=d);var j=a.leftZoomHandle_.width/2;a.leftZoomHandle_.style.left=g-j+"px",a.rightZoomHandle_.style.left=h-j+"px",a.drawInteractiveLayer_(),a.isUsingExcanvas_||p()},o=function(c){if(!f)return;f=!1,Dygraph.removeEvent(b,"mousemove",n),Dygraph.removeEvent(b,"mouseup",o),a.isUsingExcanvas_&&p()},p=function(){try{a.isChangingRange_=!0,a.dygraph_.dateWindow_=g(a.getZoomHandleStatus_()),a.dygraph_.drawGraph_(!1)}finally{a.isChangingRange_=!1}},q=function(b){if(e||f)return;var c=l(b)?"move":"default";c!=a.fgcanvas_.style.cursor&&(a.fgcanvas_.style.cursor=c)},this.dygraph_.attrs_.interactionModel=Dygraph.Interaction.dragIsPanInteractionModel,this.dygraph_.attrs_.panEdgeFraction=1e-4;var r=window.opera?"mousedown":"dragstart";Dygraph.addEvent(this.leftZoomHandle_,r,h),Dygraph.addEvent(this.rightZoomHandle_,r,h),this.isUsingExcanvas_?Dygraph.addEvent(this.iePanOverlay_,"mousedown",m):(Dygraph.addEvent(this.fgcanvas_,"mousedown",m),Dygraph.addEvent(this.fgcanvas_,"mousemove",q))},DygraphRangeSelector.prototype.drawStaticLayer_=function(){var a=this.bgcanvas_ctx_;a.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);try{this.drawMiniPlot_()}catch(b){Dygraph.warn(b)}var c=.5;this.bgcanvas_ctx_.lineWidth=1,a.strokeStyle="gray",a.beginPath(),a.moveTo(c,c),a.lineTo(c,this.canvasRect_.h-c),a.lineTo(this.canvasRect_.w-c,this.canvasRect_.h-c),a.lineTo(this.canvasRect_.w-c,c),a.stroke()},DygraphRangeSelector.prototype.drawMiniPlot_=function(){var a=this.attr_("rangeSelectorPlotFillColor"),b=this.attr_("rangeSelectorPlotStrokeColor");if(!a&&!b)return;var c=this.computeCombinedSeriesAndLimits_(),d=c.yMax-c.yMin,e=this.bgcanvas_ctx_,f=.5,g=this.dygraph_.xAxisExtremes(),h=Math.max(g[1]-g[0],1e-30),i=(this.canvasRect_.w-f)/h,j=(this.canvasRect_.h-f)/d,k=this.canvasRect_.w-f,l=this.canvasRect_.h-f;e.beginPath(),e.moveTo(f,l);for(var m=0;m<c.data.length;m++){var n=c.data[m],o=(n[0]-g[0])*i,p=l-(n[1]-c.yMin)*j;isFinite(o)&&isFinite(p)&&e.lineTo(o,p)}e.lineTo(k,l),e.closePath();if(a){var q=this.bgcanvas_ctx_.createLinearGradient(0,0,0,l);q.addColorStop(0,"white"),q.addColorStop(1,a),this.bgcanvas_ctx_.fillStyle=q,e.fill()}b&&(this.bgcanvas_ctx_.strokeStyle=b,this.bgcanvas_ctx_.lineWidth=1.5,e.stroke())},DygraphRangeSelector.prototype.computeCombinedSeriesAndLimits_=function(){var a=this.dygraph_.rawData_,b=this.attr_("logscale"),c=[],d,e,f,g,h,i,j,k;for(i=0;i<a.length;i++)if(a[i].length>1&&a[i][1]!=null){h=typeof a[i][1]!="number";if(h){d=[],e=[];for(k=0;k<a[i][1].length;k++)d.push(0),e.push(0)}break}for(i=0;i<a.length;i++){var l=a[i],m=l[0];if(h)for(k=0;k<d.length;k++)d[k]=e[k]=0;else d=e=0;for(j=1;j<l.length;j++)if(this.dygraph_.visibility()[j-1])if(h)for(k=0;k<d.length;k++){g=l[j][k];if(g===null||isNaN(g))continue;d[k]+=g,e[k]++}else{g=l[j];if(g===null||isNaN(g))continue;d+=g,e++}if(h){for(k=0;k<d.length;k++)d[k]/=e[k];f=d.slice(0)}else f=d/e;c.push([m,f])}c=this.dygraph_.rollingAverage(c,this.dygraph_.rollPeriod_);if(typeof c[0][1]!="number")for(i=0;i<c.length;i++)f=c[i][1],c[i][1]=f[0];var n=Number.MAX_VALUE,o=-Number.MAX_VALUE;for(i=0;i<c.length;i++)f=c[i][1],f!==null&&isFinite(f)&&(!b||f>0)&&(n=Math.min(n,f),o=Math.max(o,f));var p=.25;if(b){o=Dygraph.log10(o),o+=o*p,n=Dygraph.log10(n);for(i=0;i<c.length;i++)c[i][1]=Dygraph.log10(c[i][1])}else{var q,r=o-n;r<=Number.MIN_VALUE?q=o*p:q=r*p,o+=q,n-=q}return{data:c,yMin:n,yMax:o}},DygraphRangeSelector.prototype.placeZoomHandles_=function(){var a=this.dygraph_.xAxisExtremes(),b=this.dygraph_.xAxisRange(),c=a[1]-a[0],d=Math.max(0,(b[0]-a[0])/c),e=Math.max(0,(a[1]-b[1])/c),f=this.canvasRect_.x+this.canvasRect_.w*d,g=this.canvasRect_.x+this.canvasRect_.w*(1-e),h=Math.max(this.canvasRect_.y,this.canvasRect_.y+(this.canvasRect_.h-this.leftZoomHandle_.height)/2),i=this.leftZoomHandle_.width/2;this.leftZoomHandle_.style.left=f-i+"px",this.leftZoomHandle_.style.top=h+"px",this.rightZoomHandle_.style.left=g-i+"px",this.rightZoomHandle_.style.top=this.leftZoomHandle_.style.top,this.leftZoomHandle_.style.visibility="visible",this.rightZoomHandle_.style.visibility="visible"},DygraphRangeSelector.prototype.drawInteractiveLayer_=function(){var a=this.fgcanvas_ctx_;a.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);var b=1,c=this.canvasRect_.w-b,d=this.canvasRect_.h-b,e=this.getZoomHandleStatus_();a.strokeStyle="black";if(!e.isZoomed)a.beginPath(),a.moveTo(b,b),a.lineTo(b,d),a.lineTo(c,d),a.lineTo(c,b),a.stroke(),this.iePanOverlay_&&(this.iePanOverlay_.style.display="none");else{var f=Math.max(b,e.leftHandlePos-this.canvasRect_.x),g=Math.min(c,e.rightHandlePos-this.canvasRect_.x);a.fillStyle="rgba(240, 240, 240, 0.6)",a.fillRect(0,0,f,this.canvasRect_.h),a.fillRect(g,0,this.canvasRect_.w-g,this.canvasRect_.h),a.beginPath(),a.moveTo(b,b),a.lineTo(f,b),a.lineTo(f,d),a.lineTo(g,d),a.lineTo(g,b),a.lineTo(c,b),a.stroke(),this.isUsingExcanvas_&&(this.iePanOverlay_.style.width=g-f+"px",this.iePanOverlay_.style.left=f+"px",this.iePanOverlay_.style.height=d+"px",this.iePanOverlay_.style.display="inline")}},DygraphRangeSelector.prototype.getZoomHandleStatus_=function(){var a=this.leftZoomHandle_.width/2,b=parseInt(this.leftZoomHandle_.style.left,10)+a,c=parseInt(this.rightZoomHandle_.style.left,10)+a;return{leftHandlePos:b,rightHandlePos:c,isZoomed:b-1>this.canvasRect_.x||c+1<this.canvasRect_.x+this.canvasRect_.w}},"use strict",Dygraph.numericLinearTicks=function(a,b,c,d,e,f){var g=function(a){return a==="logscale"?!1:d(a)};return Dygraph.numericTicks(a,b,c,g,e,f)},Dygraph.numericTicks=function(a,b,c,d,e,f){var g=d("pixelsPerLabel"),h=[],i,j,k,l;if(f)for(i=0;i<f.length;i++)h.push({v:f[i]});else{if(d("logscale")){l=Math.floor(c/g);var m=Dygraph.binarySearch(a,Dygraph.PREFERRED_LOG_TICK_VALUES,1),n=Dygraph.binarySearch(b,Dygraph.PREFERRED_LOG_TICK_VALUES,-1);m==-1&&(m=0),n==-1&&(n=Dygraph.PREFERRED_LOG_TICK_VALUES.length-1);var o=null;if(n-m>=l/4){for(var p=n;p>=m;p--){var q=Dygraph.PREFERRED_LOG_TICK_VALUES[p],r=Math.log(q/a)/Math.log(b/a)*c,s={v:q};o===null?o={tickValue:q,pixel_coord:r}:Math.abs(r-o.pixel_coord)>=g?o={tickValue:q,pixel_coord:r}:s.label="",h.push(s)}h.reverse()}}if(h.length===0){var t=d("labelsKMG2"),u;t?u=[1,2,4,8]:u=[1,2,5];var v,w,x;for(i=-10;i<50;i++){var y;t?y=Math.pow(16,i):y=Math.pow(10,
i);var z=0;for(j=0;j<u.length;j++){v=y*u[j],w=Math.floor(a/v)*v,x=Math.ceil(b/v)*v,l=Math.abs(x-w)/v,z=c/l;if(z>g)break}if(z>g)break}w>x&&(v*=-1);for(i=0;i<l;i++)k=w+i*v,h.push({v:k})}}var A,B=[];d("labelsKMB")&&(A=1e3,B=["K","M","B","T","Q"]),d("labelsKMG2")&&(A&&Dygraph.warn("Setting both labelsKMB and labelsKMG2. Pick one!"),A=1024,B=["k","M","G","T","P","E"]);var C=d("axisLabelFormatter");for(i=0;i<h.length;i++){if(h[i].label!==undefined)continue;k=h[i].v;var D=Math.abs(k),E=C(k,0,d,e);if(B.length>0){var F=Math.pow(A,B.length);for(j=B.length-1;j>=0;j--,F/=A)if(D>=F){E=Dygraph.round_(k/F,d("digitsAfterDecimal"))+B[j];break}}h[i].label=E}return h},Dygraph.dateTicker=function(a,b,c,d,e,f){var g=Dygraph.pickDateTickGranularity(a,b,c,d);return g>=0?Dygraph.getDateAxis(a,b,g,d,e):[]},Dygraph.SECONDLY=0,Dygraph.TWO_SECONDLY=1,Dygraph.FIVE_SECONDLY=2,Dygraph.TEN_SECONDLY=3,Dygraph.THIRTY_SECONDLY=4,Dygraph.MINUTELY=5,Dygraph.TWO_MINUTELY=6,Dygraph.FIVE_MINUTELY=7,Dygraph.TEN_MINUTELY=8,Dygraph.THIRTY_MINUTELY=9,Dygraph.HOURLY=10,Dygraph.TWO_HOURLY=11,Dygraph.SIX_HOURLY=12,Dygraph.DAILY=13,Dygraph.WEEKLY=14,Dygraph.MONTHLY=15,Dygraph.QUARTERLY=16,Dygraph.BIANNUAL=17,Dygraph.ANNUAL=18,Dygraph.DECADAL=19,Dygraph.CENTENNIAL=20,Dygraph.NUM_GRANULARITIES=21,Dygraph.SHORT_SPACINGS=[],Dygraph.SHORT_SPACINGS[Dygraph.SECONDLY]=1e3,Dygraph.SHORT_SPACINGS[Dygraph.TWO_SECONDLY]=2e3,Dygraph.SHORT_SPACINGS[Dygraph.FIVE_SECONDLY]=5e3,Dygraph.SHORT_SPACINGS[Dygraph.TEN_SECONDLY]=1e4,Dygraph.SHORT_SPACINGS[Dygraph.THIRTY_SECONDLY]=3e4,Dygraph.SHORT_SPACINGS[Dygraph.MINUTELY]=6e4,Dygraph.SHORT_SPACINGS[Dygraph.TWO_MINUTELY]=12e4,Dygraph.SHORT_SPACINGS[Dygraph.FIVE_MINUTELY]=3e5,Dygraph.SHORT_SPACINGS[Dygraph.TEN_MINUTELY]=6e5,Dygraph.SHORT_SPACINGS[Dygraph.THIRTY_MINUTELY]=18e5,Dygraph.SHORT_SPACINGS[Dygraph.HOURLY]=36e5,Dygraph.SHORT_SPACINGS[Dygraph.TWO_HOURLY]=72e5,Dygraph.SHORT_SPACINGS[Dygraph.SIX_HOURLY]=216e5,Dygraph.SHORT_SPACINGS[Dygraph.DAILY]=864e5,Dygraph.SHORT_SPACINGS[Dygraph.WEEKLY]=6048e5,Dygraph.PREFERRED_LOG_TICK_VALUES=function(){var a=[];for(var b=-39;b<=39;b++){var c=Math.pow(10,b);for(var d=1;d<=9;d++){var e=c*d;a.push(e)}}return a}(),Dygraph.pickDateTickGranularity=function(a,b,c,d){var e=d("pixelsPerLabel");for(var f=0;f<Dygraph.NUM_GRANULARITIES;f++){var g=Dygraph.numDateTicks(a,b,f);if(c/g>=e)return f}return-1},Dygraph.numDateTicks=function(a,b,c){if(c<Dygraph.MONTHLY){var d=Dygraph.SHORT_SPACINGS[c];return Math.floor(.5+1*(b-a)/d)}var e=1,f=12;c==Dygraph.QUARTERLY&&(f=3),c==Dygraph.BIANNUAL&&(f=2),c==Dygraph.ANNUAL&&(f=1),c==Dygraph.DECADAL&&(f=1,e=10),c==Dygraph.CENTENNIAL&&(f=1,e=100);var g=31557807360,h=1*(b-a)/g;return Math.floor(.5+1*h*f/e)},Dygraph.getDateAxis=function(a,b,c,d,e){var f=d("axisLabelFormatter"),g=[],h;if(c<Dygraph.MONTHLY){var i=Dygraph.SHORT_SPACINGS[c],j=i/1e3,k=new Date(a),l;j<=60?(l=k.getSeconds(),k.setSeconds(l-l%j)):(k.setSeconds(0),j/=60,j<=60?(l=k.getMinutes(),k.setMinutes(l-l%j)):(k.setMinutes(0),j/=60,j<=24?(l=k.getHours(),k.setHours(l-l%j)):(k.setHours(0),j/=24,j==7&&k.setDate(k.getDate()-k.getDay())))),a=k.getTime();for(h=a;h<=b;h+=i)g.push({v:h,label:f(new Date(h),c,d,e)})}else{var m,n=1;c==Dygraph.MONTHLY?m=[0,1,2,3,4,5,6,7,8,9,10,11]:c==Dygraph.QUARTERLY?m=[0,3,6,9]:c==Dygraph.BIANNUAL?m=[0,6]:c==Dygraph.ANNUAL?m=[0]:c==Dygraph.DECADAL?(m=[0],n=10):c==Dygraph.CENTENNIAL?(m=[0],n=100):Dygraph.warn("Span of dates is too long");var o=(new Date(a)).getFullYear(),p=(new Date(b)).getFullYear(),q=Dygraph.zeropad;for(var r=o;r<=p;r++){if(r%n!==0)continue;for(var s=0;s<m.length;s++){var t=r+"/"+q(1+m[s])+"/01";h=Dygraph.dateStrToMillis(t);if(h<a||h>b)continue;g.push({v:h,label:f(new Date(h),c,d,e)})}}}return g},Dygraph.DEFAULT_ATTRS.axes.x.ticker=Dygraph.dateTicker,Dygraph.DEFAULT_ATTRS.axes.y.ticker=Dygraph.numericTicks,Dygraph.DEFAULT_ATTRS.axes.y2.ticker=Dygraph.numericTicks,"use strict",Date.ext={},Date.ext.util={},Date.ext.util.xPad=function(a,b,c){typeof c=="undefined"&&(c=10);for(;parseInt(a,10)<c&&c>1;c/=10)a=b.toString()+a;return a.toString()},Date.prototype.locale="en-GB",document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0].lang&&(Date.prototype.locale=document.getElementsByTagName("html")[0].lang),Date.ext.locales={},Date.ext.locales.en={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],x:"%d/%m/%y",X:"%T"},Date.ext.locales["en-US"]=Date.ext.locales.en,Date.ext.locales["en-US"].c="%a %d %b %Y %r %Z",Date.ext.locales["en-US"].x="%D",Date.ext.locales["en-US"].X="%r",Date.ext.locales["en-GB"]=Date.ext.locales.en,Date.ext.locales["en-AU"]=Date.ext.locales["en-GB"],Date.ext.formats={a:function(a){return Date.ext.locales[a.locale].a[a.getDay()]},A:function(a){return Date.ext.locales[a.locale].A[a.getDay()]},b:function(a){return Date.ext.locales[a.locale].b[a.getMonth()]},B:function(a){return Date.ext.locales[a.locale].B[a.getMonth()]},c:"toLocaleString",C:function(a){return Date.ext.util.xPad(parseInt(a.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(a){return Date.ext.util.xPad(parseInt(Date.ext.util.G(a)/100,10),0)},G:function(a){var b=a.getFullYear(),c=parseInt(Date.ext.formats.V(a),10),d=parseInt(Date.ext.formats.W(a),10);return d>c?b++:d===0&&c>=52&&b--,b},H:["getHours","0"],I:function(a){var b=a.getHours()%12;return Date.ext.util.xPad(b===0?12:b,0)},j:function(a){var b=a-new Date(""+a.getFullYear()+"/1/1 GMT");b+=a.getTimezoneOffset()*6e4;var c=parseInt(b/6e4/60/24,10)+1;return Date.ext.util.xPad(c,0,100)},m:function(a){return Date.ext.util.xPad(a.getMonth()+1,0)},M:["getMinutes","0"],p:function(a){return Date.ext.locales[a.locale].p[a.getHours()>=12?1:0]},P:function(a){return Date.ext.locales[a.locale].P[a.getHours()>=12?1:0]},S:["getSeconds","0"],u:function(a){var b=a.getDay();return b===0?7:b},U:function(a){var b=parseInt(Date.ext.formats.j(a),10),c=6-a.getDay(),d=parseInt((b+c)/7,10);return Date.ext.util.xPad(d,0)},V:function(a){var b=parseInt(Date.ext.formats.W(a),10),c=(new Date(""+a.getFullYear()+"/1/1")).getDay(),d=b+(c>4||c<=1?0:1);return d==53&&(new Date(""+a.getFullYear()+"/12/31")).getDay()<4?d=1:d===0&&(d=Date.ext.formats.V(new Date(""+(a.getFullYear()-1)+"/12/31"))),Date.ext.util.xPad(d,0)},w:"getDay",W:function(a){var b=parseInt(Date.ext.formats.j(a),10),c=7-Date.ext.formats.u(a),d=parseInt((b+c)/7,10);return Date.ext.util.xPad(d,0,10)},y:function(a){return Date.ext.util.xPad(a.getFullYear()%100,0)},Y:"getFullYear",z:function(a){var b=a.getTimezoneOffset(),c=Date.ext.util.xPad(parseInt(Math.abs(b/60),10),0),d=Date.ext.util.xPad(b%60,0);return(b>0?"-":"+")+c+d},Z:function(a){return a.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(a){return"%"}},Date.ext.aggregates={c:"locale",D:"%m/%d/%y",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"	",T:"%H:%M:%S",x:"locale",X:"locale"},Date.ext.aggregates.z=Date.ext.formats.z(new Date),Date.ext.aggregates.Z=Date.ext.formats.Z(new Date),Date.ext.unsupported={},Date.prototype.strftime=function(a){this.locale in Date.ext.locales||(this.locale.replace(/-[a-zA-Z]+$/,"")in Date.ext.locales?this.locale=this.locale.replace(/-[a-zA-Z]+$/,""):this.locale="en-GB");var b=this;while(a.match(/%[cDhnrRtTxXzZ]/))a=a.replace(/%([cDhnrRtTxXzZ])/g,function(a,c){var e=Date.ext.aggregates[c];return e=="locale"?Date.ext.locales[b.locale][c]:e});var c=a.replace(/%([aAbBCdegGHIjmMpPSuUVwWyY%])/g,function(a,c){var e=Date.ext.formats[c];return typeof e=="string"?b[e]():typeof e=="function"?e.call(b,b):typeof e=="object"&&typeof e[0]=="string"?Date.ext.util.xPad(b[e[0]](),e[1]):c});return b=null,c};